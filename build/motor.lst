ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motor.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.Motor_Torque_Calculate,"ax",%progbits
  20              		.align	1
  21              		.global	Motor_Torque_Calculate
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	Motor_Torque_Calculate:
  27              	.LVL0:
  28              	.LFB171:
  29              		.file 1 "Application/motor.c"
   1:Application/motor.c **** #include "motor.h"
   2:Application/motor.c **** #include "includes.h"
   3:Application/motor.c **** 
   4:Application/motor.c **** float debugNum[5] = {0, 0, 0, 0, 0}; // debugï¿½ï¿½
   5:Application/motor.c **** 
   6:Application/motor.c **** float Motor_Torque_Calculate(motor_info *motor, float torque, float target_torque)
   7:Application/motor.c **** {
  30              		.loc 1 7 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 7 1 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  40 0002 0446     		mov	r4, r0
   8:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
   9:Application/motor.c ****     PID_Calculate(&motor->PID_Torque, torque, target_torque);
  41              		.loc 1 9 5 is_stmt 1 view .LVU2
  42 0004 7030     		adds	r0, r0, #112
  43              	.LVL1:
  44              		.loc 1 9 5 is_stmt 0 view .LVU3
  45 0006 FFF7FEFF 		bl	PID_Calculate
  46              	.LVL2:
  10:Application/motor.c **** 
  11:Application/motor.c ****     if (motor->Direction != NEGATIVE)
  47              		.loc 1 11 5 is_stmt 1 view .LVU4
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 2


  48              		.loc 1 11 14 is_stmt 0 view .LVU5
  49 000a 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
  50              		.loc 1 11 8 view .LVU6
  51 000c 012B     		cmp	r3, #1
  52 000e 1AD0     		beq	.L2
  12:Application/motor.c ****         motor->Output = motor->PID_Torque.Output + motor->Ke * motor->velocity_in_rpm;
  53              		.loc 1 12 9 is_stmt 1 view .LVU7
  54              		.loc 1 12 42 is_stmt 0 view .LVU8
  55 0010 94ED297A 		vldr.32	s14, [r4, #164]
  56              		.loc 1 12 57 view .LVU9
  57 0014 D4ED066A 		vldr.32	s13, [r4, #24]
  58              		.loc 1 12 69 view .LVU10
  59 0018 B4F90C30 		ldrsh	r3, [r4, #12]
  60 001c 07EE903A 		vmov	s15, r3	@ int
  61              		.loc 1 12 62 view .LVU11
  62 0020 F8EEE77A 		vcvt.f32.s32	s15, s15
  63 0024 67EEA67A 		vmul.f32	s15, s15, s13
  64              		.loc 1 12 50 view .LVU12
  65 0028 77EE277A 		vadd.f32	s15, s14, s15
  66              		.loc 1 12 23 view .LVU13
  67 002c C4ED197A 		vstr.32	s15, [r4, #100]
  68              	.L3:
  13:Application/motor.c ****     else
  14:Application/motor.c ****         motor->Output = motor->PID_Torque.Output - motor->Ke * motor->velocity_in_rpm;
  15:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½Þ·ï¿½?
  16:Application/motor.c ****     motor->Output = float_constrain(motor->Output, -motor->max_out, motor->max_out);
  69              		.loc 1 16 5 is_stmt 1 view .LVU14
  70              		.loc 1 16 58 is_stmt 0 view .LVU15
  71 0030 94ED1A1A 		vldr.32	s2, [r4, #104]
  72              		.loc 1 16 21 view .LVU16
  73 0034 F1EE410A 		vneg.f32	s1, s2
  74 0038 94ED190A 		vldr.32	s0, [r4, #100]
  75 003c FFF7FEFF 		bl	float_constrain
  76              	.LVL3:
  77              		.loc 1 16 19 view .LVU17
  78 0040 84ED190A 		vstr.32	s0, [r4, #100]
  17:Application/motor.c **** 
  18:Application/motor.c ****     return motor->Output;
  79              		.loc 1 18 5 is_stmt 1 view .LVU18
  19:Application/motor.c **** }
  80              		.loc 1 19 1 is_stmt 0 view .LVU19
  81 0044 10BD     		pop	{r4, pc}
  82              	.LVL4:
  83              	.L2:
  14:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½Þ·ï¿½?
  84              		.loc 1 14 9 is_stmt 1 view .LVU20
  14:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½Þ·ï¿½?
  85              		.loc 1 14 42 is_stmt 0 view .LVU21
  86 0046 94ED297A 		vldr.32	s14, [r4, #164]
  14:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½Þ·ï¿½?
  87              		.loc 1 14 57 view .LVU22
  88 004a D4ED066A 		vldr.32	s13, [r4, #24]
  14:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½Þ·ï¿½?
  89              		.loc 1 14 69 view .LVU23
  90 004e B4F90C30 		ldrsh	r3, [r4, #12]
  91 0052 07EE903A 		vmov	s15, r3	@ int
  14:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½Þ·ï¿½?
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 3


  92              		.loc 1 14 62 view .LVU24
  93 0056 F8EEE77A 		vcvt.f32.s32	s15, s15
  94 005a 67EEA67A 		vmul.f32	s15, s15, s13
  14:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½Þ·ï¿½?
  95              		.loc 1 14 50 view .LVU25
  96 005e 77EE677A 		vsub.f32	s15, s14, s15
  14:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½Þ·ï¿½?
  97              		.loc 1 14 23 view .LVU26
  98 0062 C4ED197A 		vstr.32	s15, [r4, #100]
  99 0066 E3E7     		b	.L3
 100              		.cfi_endproc
 101              	.LFE171:
 103              		.section	.text.Motor_Speed_Calculate,"ax",%progbits
 104              		.align	1
 105              		.global	Motor_Speed_Calculate
 106              		.syntax unified
 107              		.thumb
 108              		.thumb_func
 110              	Motor_Speed_Calculate:
 111              	.LVL5:
 112              	.LFB172:
  20:Application/motor.c **** 
  21:Application/motor.c **** float Motor_Speed_Calculate(motor_info *motor, float velocity, float target_speed)
  22:Application/motor.c **** {
 113              		.loc 1 22 1 is_stmt 1 view -0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 0
 116              		@ frame_needed = 0, uses_anonymous_args = 0
 117              		.loc 1 22 1 is_stmt 0 view .LVU28
 118 0000 10B5     		push	{r4, lr}
 119              	.LCFI1:
 120              		.cfi_def_cfa_offset 8
 121              		.cfi_offset 4, -8
 122              		.cfi_offset 14, -4
 123 0002 0446     		mov	r4, r0
  23:Application/motor.c ****     PID_Calculate(&motor->PID_Velocity, velocity, target_speed);
 124              		.loc 1 23 5 is_stmt 1 view .LVU29
 125 0004 00F59470 		add	r0, r0, #296
 126              	.LVL6:
 127              		.loc 1 23 5 is_stmt 0 view .LVU30
 128 0008 FFF7FEFF 		bl	PID_Calculate
 129              	.LVL7:
  24:Application/motor.c ****     motor->Output = motor->PID_Velocity.Output;
 130              		.loc 1 24 5 is_stmt 1 view .LVU31
 131              		.loc 1 24 40 is_stmt 0 view .LVU32
 132 000c 94ED570A 		vldr.32	s0, [r4, #348]
 133              		.loc 1 24 19 view .LVU33
 134 0010 84ED190A 		vstr.32	s0, [r4, #100]
  25:Application/motor.c ****     motor->Output = float_constrain(motor->Output, -motor->max_out, motor->max_out);
 135              		.loc 1 25 5 is_stmt 1 view .LVU34
 136              		.loc 1 25 58 is_stmt 0 view .LVU35
 137 0014 94ED1A1A 		vldr.32	s2, [r4, #104]
 138              		.loc 1 25 21 view .LVU36
 139 0018 F1EE410A 		vneg.f32	s1, s2
 140 001c FFF7FEFF 		bl	float_constrain
 141              	.LVL8:
 142              		.loc 1 25 19 view .LVU37
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 4


 143 0020 84ED190A 		vstr.32	s0, [r4, #100]
  26:Application/motor.c **** 
  27:Application/motor.c ****     return motor->Output;
 144              		.loc 1 27 5 is_stmt 1 view .LVU38
  28:Application/motor.c **** }
 145              		.loc 1 28 1 is_stmt 0 view .LVU39
 146 0024 10BD     		pop	{r4, pc}
 147              		.loc 1 28 1 view .LVU40
 148              		.cfi_endproc
 149              	.LFE172:
 151              		.section	.text.Motor_Angle_Calculate,"ax",%progbits
 152              		.align	1
 153              		.global	Motor_Angle_Calculate
 154              		.syntax unified
 155              		.thumb
 156              		.thumb_func
 158              	Motor_Angle_Calculate:
 159              	.LVL9:
 160              	.LFB173:
  29:Application/motor.c **** 
  30:Application/motor.c **** float Motor_Angle_Calculate(motor_info *motor, float angle, float velocity, float target_angle)
  31:Application/motor.c **** {
 161              		.loc 1 31 1 is_stmt 1 view -0
 162              		.cfi_startproc
 163              		@ args = 0, pretend = 0, frame = 0
 164              		@ frame_needed = 0, uses_anonymous_args = 0
 165              		.loc 1 31 1 is_stmt 0 view .LVU42
 166 0000 10B5     		push	{r4, lr}
 167              	.LCFI2:
 168              		.cfi_def_cfa_offset 8
 169              		.cfi_offset 4, -8
 170              		.cfi_offset 14, -4
 171 0002 2DED028B 		vpush.64	{d8}
 172              	.LCFI3:
 173              		.cfi_def_cfa_offset 16
 174              		.cfi_offset 80, -16
 175              		.cfi_offset 81, -12
 176 0006 0446     		mov	r4, r0
 177 0008 B0EE608A 		vmov.f32	s16, s1
  32:Application/motor.c ****     PID_Calculate(&motor->PID_Angle, angle, target_angle);
 178              		.loc 1 32 5 is_stmt 1 view .LVU43
 179 000c F0EE410A 		vmov.f32	s1, s2
 180              	.LVL10:
 181              		.loc 1 32 5 is_stmt 0 view .LVU44
 182 0010 00F5F070 		add	r0, r0, #480
 183              	.LVL11:
 184              		.loc 1 32 5 view .LVU45
 185 0014 FFF7FEFF 		bl	PID_Calculate
 186              	.LVL12:
  33:Application/motor.c ****     Motor_Speed_Calculate(motor, velocity, motor->PID_Angle.Output);
 187              		.loc 1 33 5 is_stmt 1 view .LVU46
 188 0018 D4ED850A 		vldr.32	s1, [r4, #532]
 189 001c B0EE480A 		vmov.f32	s0, s16
 190 0020 2046     		mov	r0, r4
 191 0022 FFF7FEFF 		bl	Motor_Speed_Calculate
 192              	.LVL13:
  34:Application/motor.c ****     motor->Output = float_constrain(motor->Output, -motor->max_out, motor->max_out);
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 5


 193              		.loc 1 34 5 view .LVU47
 194              		.loc 1 34 58 is_stmt 0 view .LVU48
 195 0026 94ED1A1A 		vldr.32	s2, [r4, #104]
 196              		.loc 1 34 21 view .LVU49
 197 002a F1EE410A 		vneg.f32	s1, s2
 198 002e 94ED190A 		vldr.32	s0, [r4, #100]
 199 0032 FFF7FEFF 		bl	float_constrain
 200              	.LVL14:
 201              		.loc 1 34 19 view .LVU50
 202 0036 84ED190A 		vstr.32	s0, [r4, #100]
  35:Application/motor.c **** 
  36:Application/motor.c ****     return motor->Output;
 203              		.loc 1 36 5 is_stmt 1 view .LVU51
  37:Application/motor.c **** }
 204              		.loc 1 37 1 is_stmt 0 view .LVU52
 205 003a BDEC028B 		vldm	sp!, {d8}
 206              	.LCFI4:
 207              		.cfi_restore 80
 208              		.cfi_restore 81
 209              		.cfi_def_cfa_offset 8
 210              	.LVL15:
 211              		.loc 1 37 1 view .LVU53
 212 003e 10BD     		pop	{r4, pc}
 213              		.loc 1 37 1 view .LVU54
 214              		.cfi_endproc
 215              	.LFE173:
 217              		.section	.text.Get_Motor_Info,"ax",%progbits
 218              		.align	1
 219              		.global	Get_Motor_Info
 220              		.syntax unified
 221              		.thumb
 222              		.thumb_func
 224              	Get_Motor_Info:
 225              	.LVL16:
 226              	.LFB174:
  38:Application/motor.c **** 
  39:Application/motor.c **** /* -------------------------------- DJI motor ------------------------------- */
  40:Application/motor.c **** /**
  41:Application/motor.c ****  * @Func	    void get_moto_info(moto_measure_t *ptr, CAN_HandleTypeDef* hcan)
  42:Application/motor.c ****  * @Brief      process data received from CAN
  43:Application/motor.c ****  * @Param	    motor_info *ptr  CAN_HandleTypeDef *_hcan
  44:Application/motor.c ****  * @Retval	    None
  45:Application/motor.c ****  * @Date       2019/11/5
  46:Application/motor.c ****  **/
  47:Application/motor.c **** void Get_Motor_Info(motor_info *ptr, uint8_t *aData)
  48:Application/motor.c **** {
 227              		.loc 1 48 1 is_stmt 1 view -0
 228              		.cfi_startproc
 229              		@ args = 0, pretend = 0, frame = 0
 230              		@ frame_needed = 0, uses_anonymous_args = 0
 231              		.loc 1 48 1 is_stmt 0 view .LVU56
 232 0000 10B5     		push	{r4, lr}
 233              	.LCFI5:
 234              		.cfi_def_cfa_offset 8
 235              		.cfi_offset 4, -8
 236              		.cfi_offset 14, -4
 237 0002 0446     		mov	r4, r0
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 6


  49:Application/motor.c ****     // ï¿½ï¿½ï¿½C620ï¿½ï¿½ï¿½ï¿½Ö²ï¿½?
  50:Application/motor.c ****     if (ptr->Direction != NEGATIVE)
 238              		.loc 1 50 5 is_stmt 1 view .LVU57
 239              		.loc 1 50 12 is_stmt 0 view .LVU58
 240 0004 437D     		ldrb	r3, [r0, #21]	@ zero_extendqisi2
 241              		.loc 1 50 8 view .LVU59
 242 0006 012B     		cmp	r3, #1
 243 0008 45D0     		beq	.L10
  51:Application/motor.c ****     {
  52:Application/motor.c ****         ptr->RawAngle = (uint16_t)(aData[0] << 8 | aData[1]);
 244              		.loc 1 52 9 is_stmt 1 view .LVU60
 245              		.loc 1 52 41 is_stmt 0 view .LVU61
 246 000a 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 247              		.loc 1 52 57 view .LVU62
 248 000c 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 249              		.loc 1 52 25 view .LVU63
 250 000e 43EA0223 		orr	r3, r3, r2, lsl #8
 251              		.loc 1 52 23 view .LVU64
 252 0012 8385     		strh	r3, [r0, #44]	@ movhi
  53:Application/motor.c ****         ptr->velocity_in_rpm = (int16_t)(aData[2] << 8 | aData[3]);
 253              		.loc 1 53 9 is_stmt 1 view .LVU65
 254              		.loc 1 53 47 is_stmt 0 view .LVU66
 255 0014 8A78     		ldrb	r2, [r1, #2]	@ zero_extendqisi2
 256              		.loc 1 53 63 view .LVU67
 257 0016 CB78     		ldrb	r3, [r1, #3]	@ zero_extendqisi2
 258              		.loc 1 53 32 view .LVU68
 259 0018 43EA0223 		orr	r3, r3, r2, lsl #8
 260              		.loc 1 53 30 view .LVU69
 261 001c 8381     		strh	r3, [r0, #12]	@ movhi
 262              	.L11:
  54:Application/motor.c ****     }
  55:Application/motor.c ****     else
  56:Application/motor.c ****     {
  57:Application/motor.c ****         ptr->RawAngle = 8191 - (uint16_t)(aData[0] << 8 | aData[1]);
  58:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[2] << 8 | aData[3]);
  59:Application/motor.c ****     }
  60:Application/motor.c **** 
  61:Application/motor.c ****     ptr->Real_Current = (aData[4] << 8 | aData[5]) * 5.0f / 16384.0f;
 263              		.loc 1 61 5 is_stmt 1 view .LVU70
 264              		.loc 1 61 31 is_stmt 0 view .LVU71
 265 001e 0A79     		ldrb	r2, [r1, #4]	@ zero_extendqisi2
 266              		.loc 1 61 47 view .LVU72
 267 0020 4B79     		ldrb	r3, [r1, #5]	@ zero_extendqisi2
 268              		.loc 1 61 40 view .LVU73
 269 0022 43EA0223 		orr	r3, r3, r2, lsl #8
 270 0026 07EE903A 		vmov	s15, r3	@ int
 271              		.loc 1 61 52 view .LVU74
 272 002a F8EEE77A 		vcvt.f32.s32	s15, s15
 273 002e B1EE047A 		vmov.f32	s14, #5.0e+0
 274 0032 67EE877A 		vmul.f32	s15, s15, s14
 275              		.loc 1 61 59 view .LVU75
 276 0036 9FED237A 		vldr.32	s14, .L15
 277 003a 67EE877A 		vmul.f32	s15, s15, s14
 278              		.loc 1 61 23 view .LVU76
 279 003e C4ED047A 		vstr.32	s15, [r4, #16]
  62:Application/motor.c ****     ptr->Temperature = aData[6];
 280              		.loc 1 62 5 is_stmt 1 view .LVU77
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 7


 281              		.loc 1 62 22 is_stmt 0 view .LVU78
 282 0042 8B79     		ldrb	r3, [r1, #6]	@ zero_extendqisi2
 283 0044 2375     		strb	r3, [r4, #20]
  63:Application/motor.c **** 
  64:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½È¦ï¿½ï¿½
  65:Application/motor.c ****     if (ptr->RawAngle - ptr->last_angle > 4096)
 284              		.loc 1 65 5 is_stmt 1 view .LVU79
 285              		.loc 1 65 12 is_stmt 0 view .LVU80
 286 0046 A38D     		ldrh	r3, [r4, #44]
 287              		.loc 1 65 28 view .LVU81
 288 0048 228F     		ldrh	r2, [r4, #56]
 289              		.loc 1 65 23 view .LVU82
 290 004a 9A1A     		subs	r2, r3, r2
 291              		.loc 1 65 8 view .LVU83
 292 004c B2F5805F 		cmp	r2, #4096
 293 0050 30DD     		ble	.L12
  66:Application/motor.c ****         ptr->round_cnt--;
 294              		.loc 1 66 9 is_stmt 1 view .LVU84
 295              		.loc 1 66 12 is_stmt 0 view .LVU85
 296 0052 226C     		ldr	r2, [r4, #64]
 297              		.loc 1 66 23 view .LVU86
 298 0054 013A     		subs	r2, r2, #1
 299 0056 2264     		str	r2, [r4, #64]
 300              	.L13:
  67:Application/motor.c ****     else if (ptr->RawAngle - ptr->last_angle < -4096)
  68:Application/motor.c ****         ptr->round_cnt++;
  69:Application/motor.c **** 
  70:Application/motor.c ****     // ×ªï¿½ï¿½ï¿½ï¿½Ðµï¿½ï¿½ï¿½?
  71:Application/motor.c ****     ptr->Angle = loop_float_constrain(ptr->RawAngle + ptr->zero_offset, -4095.5, 4095.5);
 301              		.loc 1 71 5 is_stmt 1 view .LVU87
 302              		.loc 1 71 58 is_stmt 0 view .LVU88
 303 0058 B4F93C20 		ldrsh	r2, [r4, #60]
 304              		.loc 1 71 53 view .LVU89
 305 005c 1344     		add	r3, r3, r2
 306 005e 00EE103A 		vmov	s0, r3	@ int
 307              		.loc 1 71 18 view .LVU90
 308 0062 9FED191A 		vldr.32	s2, .L15+4
 309 0066 DFED190A 		vldr.32	s1, .L15+8
 310 006a B8EEC00A 		vcvt.f32.s32	s0, s0
 311 006e FFF7FEFF 		bl	loop_float_constrain
 312              	.LVL17:
 313              		.loc 1 71 16 view .LVU91
 314 0072 84ED090A 		vstr.32	s0, [r4, #36]
  72:Application/motor.c **** 
  73:Application/motor.c ****     // ×ªï¿½ï¿½ï¿½Ç¶Èµï¿½Î»Îªï¿½ï¿½
  74:Application/motor.c ****     ptr->angle_in_degree = ptr->Angle * 0.0439507f;
 315              		.loc 1 74 5 is_stmt 1 view .LVU92
 316              		.loc 1 74 39 is_stmt 0 view .LVU93
 317 0076 DFED167A 		vldr.32	s15, .L15+12
 318 007a 20EE270A 		vmul.f32	s0, s0, s15
 319              		.loc 1 74 26 view .LVU94
 320 007e 84ED0A0A 		vstr.32	s0, [r4, #40]
  75:Application/motor.c **** 
  76:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½ï¿½Ü½Ç¶ï¿½
  77:Application/motor.c ****     ptr->total_angle = ptr->round_cnt * 8192 + ptr->RawAngle - ptr->offset_angle;
 321              		.loc 1 77 5 is_stmt 1 view .LVU95
 322              		.loc 1 77 27 is_stmt 0 view .LVU96
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 8


 323 0082 236C     		ldr	r3, [r4, #64]
 324              		.loc 1 77 51 view .LVU97
 325 0084 A28D     		ldrh	r2, [r4, #44]
 326              		.loc 1 77 46 view .LVU98
 327 0086 02EB4333 		add	r3, r2, r3, lsl #13
 328              		.loc 1 77 67 view .LVU99
 329 008a B4F93A10 		ldrsh	r1, [r4, #58]
 330              		.loc 1 77 62 view .LVU100
 331 008e 5B1A     		subs	r3, r3, r1
 332              		.loc 1 77 22 view .LVU101
 333 0090 6364     		str	r3, [r4, #68]
  78:Application/motor.c **** 
  79:Application/motor.c ****     ptr->last_angle = ptr->RawAngle; // update last_angle
 334              		.loc 1 79 5 is_stmt 1 view .LVU102
 335              		.loc 1 79 21 is_stmt 0 view .LVU103
 336 0092 2287     		strh	r2, [r4, #56]	@ movhi
  80:Application/motor.c **** }
 337              		.loc 1 80 1 view .LVU104
 338 0094 10BD     		pop	{r4, pc}
 339              	.LVL18:
 340              	.L10:
  57:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[2] << 8 | aData[3]);
 341              		.loc 1 57 9 is_stmt 1 view .LVU105
  57:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[2] << 8 | aData[3]);
 342              		.loc 1 57 48 is_stmt 0 view .LVU106
 343 0096 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
  57:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[2] << 8 | aData[3]);
 344              		.loc 1 57 64 view .LVU107
 345 0098 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
  57:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[2] << 8 | aData[3]);
 346              		.loc 1 57 32 view .LVU108
 347 009a 43EA0223 		orr	r3, r3, r2, lsl #8
  57:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[2] << 8 | aData[3]);
 348              		.loc 1 57 30 view .LVU109
 349 009e C3F5FF53 		rsb	r3, r3, #8160
 350 00a2 1F33     		adds	r3, r3, #31
  57:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[2] << 8 | aData[3]);
 351              		.loc 1 57 23 view .LVU110
 352 00a4 8385     		strh	r3, [r0, #44]	@ movhi
  58:Application/motor.c ****     }
 353              		.loc 1 58 9 is_stmt 1 view .LVU111
  58:Application/motor.c ****     }
 354              		.loc 1 58 48 is_stmt 0 view .LVU112
 355 00a6 8A78     		ldrb	r2, [r1, #2]	@ zero_extendqisi2
  58:Application/motor.c ****     }
 356              		.loc 1 58 64 view .LVU113
 357 00a8 CB78     		ldrb	r3, [r1, #3]	@ zero_extendqisi2
  58:Application/motor.c ****     }
 358              		.loc 1 58 33 view .LVU114
 359 00aa 43EA0223 		orr	r3, r3, r2, lsl #8
  58:Application/motor.c ****     }
 360              		.loc 1 58 30 view .LVU115
 361 00ae 5B42     		rsbs	r3, r3, #0
 362 00b0 8381     		strh	r3, [r0, #12]	@ movhi
 363 00b2 B4E7     		b	.L11
 364              	.L12:
  67:Application/motor.c ****         ptr->round_cnt++;
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 9


 365              		.loc 1 67 10 is_stmt 1 view .LVU116
  67:Application/motor.c ****         ptr->round_cnt++;
 366              		.loc 1 67 13 is_stmt 0 view .LVU117
 367 00b4 12F5805F 		cmn	r2, #4096
 368 00b8 CEDA     		bge	.L13
  68:Application/motor.c **** 
 369              		.loc 1 68 9 is_stmt 1 view .LVU118
  68:Application/motor.c **** 
 370              		.loc 1 68 12 is_stmt 0 view .LVU119
 371 00ba 226C     		ldr	r2, [r4, #64]
  68:Application/motor.c **** 
 372              		.loc 1 68 23 view .LVU120
 373 00bc 0132     		adds	r2, r2, #1
 374 00be 2264     		str	r2, [r4, #64]
 375 00c0 CAE7     		b	.L13
 376              	.L16:
 377 00c2 00BF     		.align	2
 378              	.L15:
 379 00c4 00008038 		.word	947912704
 380 00c8 00F87F45 		.word	1166014464
 381 00cc 00F87FC5 		.word	-981469184
 382 00d0 A605343D 		.word	1026819494
 383              		.cfi_endproc
 384              	.LFE174:
 386              		.section	.text.Get_Motor_Offset,"ax",%progbits
 387              		.align	1
 388              		.global	Get_Motor_Offset
 389              		.syntax unified
 390              		.thumb
 391              		.thumb_func
 393              	Get_Motor_Offset:
 394              	.LVL19:
 395              	.LFB175:
  81:Application/motor.c **** 
  82:Application/motor.c **** /*this function should be called after system+can init */
  83:Application/motor.c **** void Get_Motor_Offset(motor_info *ptr, uint8_t *aData)
  84:Application/motor.c **** {
 396              		.loc 1 84 1 is_stmt 1 view -0
 397              		.cfi_startproc
 398              		@ args = 0, pretend = 0, frame = 0
 399              		@ frame_needed = 0, uses_anonymous_args = 0
 400              		@ link register save eliminated.
  85:Application/motor.c ****     ptr->RawAngle = (uint16_t)(aData[0] << 8 | aData[1]);
 401              		.loc 1 85 5 view .LVU122
 402              		.loc 1 85 37 is_stmt 0 view .LVU123
 403 0000 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 404              		.loc 1 85 53 view .LVU124
 405 0002 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 406              		.loc 1 85 46 view .LVU125
 407 0004 43EA0223 		orr	r3, r3, r2, lsl #8
 408              		.loc 1 85 19 view .LVU126
 409 0008 8385     		strh	r3, [r0, #44]	@ movhi
  86:Application/motor.c ****     ptr->offset_angle = ptr->RawAngle;
 410              		.loc 1 86 5 is_stmt 1 view .LVU127
 411              		.loc 1 86 23 is_stmt 0 view .LVU128
 412 000a 4387     		strh	r3, [r0, #58]	@ movhi
  87:Application/motor.c **** }
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 10


 413              		.loc 1 87 1 view .LVU129
 414 000c 7047     		bx	lr
 415              		.cfi_endproc
 416              	.LFE175:
 418              		.section	.text.Send_Motor_Current_1_4,"ax",%progbits
 419              		.align	1
 420              		.global	Send_Motor_Current_1_4
 421              		.syntax unified
 422              		.thumb
 423              		.thumb_func
 425              	Send_Motor_Current_1_4:
 426              	.LVL20:
 427              	.LFB176:
  88:Application/motor.c **** 
  89:Application/motor.c **** /**
  90:Application/motor.c ****   * @Func	    void Send_Motor_Current(CAN_HandleTypeDef* hcan,
  91:Application/motor.c ****                                     int16_t c1, int16_t c2, int16_t c3, int16_t c4)
  92:Application/motor.c ****   * @Brief
  93:Application/motor.c ****   * @Param	    cx x=1,2,3,4
  94:Application/motor.c ****   * @Retval	    None
  95:Application/motor.c ****   * @Date       2019/11/5
  96:Application/motor.c ****  **/
  97:Application/motor.c **** HAL_StatusTypeDef Send_Motor_Current_1_4(CAN_HandleTypeDef *_hcan,
  98:Application/motor.c ****                                          int16_t c1, int16_t c2, int16_t c3, int16_t c4)
  99:Application/motor.c **** {
 428              		.loc 1 99 1 is_stmt 1 view -0
 429              		.cfi_startproc
 430              		@ args = 4, pretend = 0, frame = 8
 431              		@ frame_needed = 0, uses_anonymous_args = 0
 432              		.loc 1 99 1 is_stmt 0 view .LVU131
 433 0000 30B5     		push	{r4, r5, lr}
 434              	.LCFI6:
 435              		.cfi_def_cfa_offset 12
 436              		.cfi_offset 4, -12
 437              		.cfi_offset 5, -8
 438              		.cfi_offset 14, -4
 439 0002 83B0     		sub	sp, sp, #12
 440              	.LCFI7:
 441              		.cfi_def_cfa_offset 24
 442 0004 8E46     		mov	lr, r1
 443 0006 9446     		mov	ip, r2
 444 0008 BDF91840 		ldrsh	r4, [sp, #24]
 100:Application/motor.c ****     static CAN_TxHeaderTypeDef TX_MSG;
 445              		.loc 1 100 5 is_stmt 1 view .LVU132
 101:Application/motor.c ****     static uint8_t CAN_Send_Data[8];
 446              		.loc 1 101 5 view .LVU133
 102:Application/motor.c ****     uint32_t send_mail_box;
 447              		.loc 1 102 5 view .LVU134
 103:Application/motor.c **** 
 104:Application/motor.c ****     // ï¿½ï¿½ï¿½Ã·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ý°ï¿½ï¿½ï¿½IDï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½IDÎªï¿½Ø¶ï¿½ï
 105:Application/motor.c ****     TX_MSG.StdId = CAN_Transmit_1_4_ID;
 448              		.loc 1 105 5 view .LVU135
 449              		.loc 1 105 18 is_stmt 0 view .LVU136
 450 000c 1149     		ldr	r1, .L20
 451              	.LVL21:
 452              		.loc 1 105 18 view .LVU137
 453 000e 4FF40072 		mov	r2, #512
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 11


 454              	.LVL22:
 455              		.loc 1 105 18 view .LVU138
 456 0012 0A60     		str	r2, [r1]
 106:Application/motor.c ****     TX_MSG.IDE = CAN_ID_STD;
 457              		.loc 1 106 5 is_stmt 1 view .LVU139
 458              		.loc 1 106 16 is_stmt 0 view .LVU140
 459 0014 0022     		movs	r2, #0
 460 0016 8A60     		str	r2, [r1, #8]
 107:Application/motor.c ****     TX_MSG.RTR = CAN_RTR_DATA;
 461              		.loc 1 107 5 is_stmt 1 view .LVU141
 462              		.loc 1 107 16 is_stmt 0 view .LVU142
 463 0018 CA60     		str	r2, [r1, #12]
 108:Application/motor.c ****     TX_MSG.DLC = 0x08;
 464              		.loc 1 108 5 is_stmt 1 view .LVU143
 465              		.loc 1 108 16 is_stmt 0 view .LVU144
 466 001a 0822     		movs	r2, #8
 467 001c 0A61     		str	r2, [r1, #16]
 109:Application/motor.c **** 
 110:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½C620ï¿½ï¿½ï¿½ï¿½?ï¿½ï¿½ï¿½ï¿½ï¿½Ãµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½?
 111:Application/motor.c ****     CAN_Send_Data[0] = (c1 >> 8);
 468              		.loc 1 111 5 is_stmt 1 view .LVU145
 469              		.loc 1 111 22 is_stmt 0 view .LVU146
 470 001e 0E4A     		ldr	r2, .L20+4
 471 0020 4FEA2E25 		asr	r5, lr, #8
 472 0024 1570     		strb	r5, [r2]
 112:Application/motor.c ****     CAN_Send_Data[1] = c1;
 473              		.loc 1 112 5 is_stmt 1 view .LVU147
 474              		.loc 1 112 22 is_stmt 0 view .LVU148
 475 0026 82F801E0 		strb	lr, [r2, #1]
 113:Application/motor.c ****     CAN_Send_Data[2] = (c2 >> 8);
 476              		.loc 1 113 5 is_stmt 1 view .LVU149
 477              		.loc 1 113 22 is_stmt 0 view .LVU150
 478 002a 4FEA2C2E 		asr	lr, ip, #8
 479 002e 82F802E0 		strb	lr, [r2, #2]
 114:Application/motor.c ****     CAN_Send_Data[3] = c2;
 480              		.loc 1 114 5 is_stmt 1 view .LVU151
 481              		.loc 1 114 22 is_stmt 0 view .LVU152
 482 0032 82F803C0 		strb	ip, [r2, #3]
 115:Application/motor.c ****     CAN_Send_Data[4] = (c3 >> 8);
 483              		.loc 1 115 5 is_stmt 1 view .LVU153
 484              		.loc 1 115 22 is_stmt 0 view .LVU154
 485 0036 4FEA232C 		asr	ip, r3, #8
 486 003a 82F804C0 		strb	ip, [r2, #4]
 116:Application/motor.c ****     CAN_Send_Data[5] = c3;
 487              		.loc 1 116 5 is_stmt 1 view .LVU155
 488              		.loc 1 116 22 is_stmt 0 view .LVU156
 489 003e 5371     		strb	r3, [r2, #5]
 117:Application/motor.c ****     CAN_Send_Data[6] = (c4 >> 8);
 490              		.loc 1 117 5 is_stmt 1 view .LVU157
 491              		.loc 1 117 22 is_stmt 0 view .LVU158
 492 0040 9DF91930 		ldrsb	r3, [sp, #25]
 493              	.LVL23:
 494              		.loc 1 117 22 view .LVU159
 495 0044 9371     		strb	r3, [r2, #6]
 118:Application/motor.c ****     CAN_Send_Data[7] = c4;
 496              		.loc 1 118 5 is_stmt 1 view .LVU160
 497              		.loc 1 118 22 is_stmt 0 view .LVU161
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 12


 498 0046 D471     		strb	r4, [r2, #7]
 119:Application/motor.c **** 
 120:Application/motor.c ****     // CANï¿½ï¿½ï¿½Ý°ï¿½ï¿½ï¿½ï¿½ï¿½
 121:Application/motor.c ****     return HAL_CAN_AddTxMessage(_hcan, &TX_MSG, CAN_Send_Data, &send_mail_box);
 499              		.loc 1 121 5 is_stmt 1 view .LVU162
 500              		.loc 1 121 12 is_stmt 0 view .LVU163
 501 0048 01AB     		add	r3, sp, #4
 502 004a FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 503              	.LVL24:
 122:Application/motor.c **** }
 504              		.loc 1 122 1 view .LVU164
 505 004e 03B0     		add	sp, sp, #12
 506              	.LCFI8:
 507              		.cfi_def_cfa_offset 12
 508              		@ sp needed
 509 0050 30BD     		pop	{r4, r5, pc}
 510              	.LVL25:
 511              	.L21:
 512              		.loc 1 122 1 view .LVU165
 513 0052 00BF     		.align	2
 514              	.L20:
 515 0054 00000000 		.word	.LANCHOR0
 516 0058 00000000 		.word	.LANCHOR1
 517              		.cfi_endproc
 518              	.LFE176:
 520              		.section	.text.Send_Motor_Current_5_8,"ax",%progbits
 521              		.align	1
 522              		.global	Send_Motor_Current_5_8
 523              		.syntax unified
 524              		.thumb
 525              		.thumb_func
 527              	Send_Motor_Current_5_8:
 528              	.LVL26:
 529              	.LFB177:
 123:Application/motor.c **** 
 124:Application/motor.c **** HAL_StatusTypeDef Send_Motor_Current_5_8(CAN_HandleTypeDef *_hcan,
 125:Application/motor.c ****                                          int16_t c1, int16_t c2, int16_t c3, int16_t c4)
 126:Application/motor.c **** {
 530              		.loc 1 126 1 is_stmt 1 view -0
 531              		.cfi_startproc
 532              		@ args = 4, pretend = 0, frame = 8
 533              		@ frame_needed = 0, uses_anonymous_args = 0
 534              		.loc 1 126 1 is_stmt 0 view .LVU167
 535 0000 30B5     		push	{r4, r5, lr}
 536              	.LCFI9:
 537              		.cfi_def_cfa_offset 12
 538              		.cfi_offset 4, -12
 539              		.cfi_offset 5, -8
 540              		.cfi_offset 14, -4
 541 0002 83B0     		sub	sp, sp, #12
 542              	.LCFI10:
 543              		.cfi_def_cfa_offset 24
 544 0004 8E46     		mov	lr, r1
 545 0006 9446     		mov	ip, r2
 546 0008 BDF91840 		ldrsh	r4, [sp, #24]
 127:Application/motor.c ****     static CAN_TxHeaderTypeDef TX_MSG;
 547              		.loc 1 127 5 is_stmt 1 view .LVU168
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 13


 128:Application/motor.c ****     static uint8_t CAN_Send_Data[8];
 548              		.loc 1 128 5 view .LVU169
 129:Application/motor.c ****     uint32_t send_mail_box;
 549              		.loc 1 129 5 view .LVU170
 130:Application/motor.c **** 
 131:Application/motor.c ****     TX_MSG.StdId = CAN_Transmit_5_8_ID;
 550              		.loc 1 131 5 view .LVU171
 551              		.loc 1 131 18 is_stmt 0 view .LVU172
 552 000c 1149     		ldr	r1, .L24
 553              	.LVL27:
 554              		.loc 1 131 18 view .LVU173
 555 000e 40F2FF12 		movw	r2, #511
 556              	.LVL28:
 557              		.loc 1 131 18 view .LVU174
 558 0012 0A60     		str	r2, [r1]
 132:Application/motor.c ****     TX_MSG.IDE = CAN_ID_STD;
 559              		.loc 1 132 5 is_stmt 1 view .LVU175
 560              		.loc 1 132 16 is_stmt 0 view .LVU176
 561 0014 0022     		movs	r2, #0
 562 0016 8A60     		str	r2, [r1, #8]
 133:Application/motor.c ****     TX_MSG.RTR = CAN_RTR_DATA;
 563              		.loc 1 133 5 is_stmt 1 view .LVU177
 564              		.loc 1 133 16 is_stmt 0 view .LVU178
 565 0018 CA60     		str	r2, [r1, #12]
 134:Application/motor.c ****     TX_MSG.DLC = 0x08;
 566              		.loc 1 134 5 is_stmt 1 view .LVU179
 567              		.loc 1 134 16 is_stmt 0 view .LVU180
 568 001a 0822     		movs	r2, #8
 569 001c 0A61     		str	r2, [r1, #16]
 135:Application/motor.c ****     CAN_Send_Data[0] = (c1 >> 8);
 570              		.loc 1 135 5 is_stmt 1 view .LVU181
 571              		.loc 1 135 22 is_stmt 0 view .LVU182
 572 001e 0E4A     		ldr	r2, .L24+4
 573 0020 4FEA2E25 		asr	r5, lr, #8
 574 0024 1570     		strb	r5, [r2]
 136:Application/motor.c ****     CAN_Send_Data[1] = c1;
 575              		.loc 1 136 5 is_stmt 1 view .LVU183
 576              		.loc 1 136 22 is_stmt 0 view .LVU184
 577 0026 82F801E0 		strb	lr, [r2, #1]
 137:Application/motor.c ****     CAN_Send_Data[2] = (c2 >> 8);
 578              		.loc 1 137 5 is_stmt 1 view .LVU185
 579              		.loc 1 137 22 is_stmt 0 view .LVU186
 580 002a 4FEA2C2E 		asr	lr, ip, #8
 581 002e 82F802E0 		strb	lr, [r2, #2]
 138:Application/motor.c ****     CAN_Send_Data[3] = c2;
 582              		.loc 1 138 5 is_stmt 1 view .LVU187
 583              		.loc 1 138 22 is_stmt 0 view .LVU188
 584 0032 82F803C0 		strb	ip, [r2, #3]
 139:Application/motor.c ****     CAN_Send_Data[4] = (c3 >> 8);
 585              		.loc 1 139 5 is_stmt 1 view .LVU189
 586              		.loc 1 139 22 is_stmt 0 view .LVU190
 587 0036 4FEA232C 		asr	ip, r3, #8
 588 003a 82F804C0 		strb	ip, [r2, #4]
 140:Application/motor.c ****     CAN_Send_Data[5] = c3;
 589              		.loc 1 140 5 is_stmt 1 view .LVU191
 590              		.loc 1 140 22 is_stmt 0 view .LVU192
 591 003e 5371     		strb	r3, [r2, #5]
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 14


 141:Application/motor.c ****     CAN_Send_Data[6] = (c4 >> 8);
 592              		.loc 1 141 5 is_stmt 1 view .LVU193
 593              		.loc 1 141 22 is_stmt 0 view .LVU194
 594 0040 9DF91930 		ldrsb	r3, [sp, #25]
 595              	.LVL29:
 596              		.loc 1 141 22 view .LVU195
 597 0044 9371     		strb	r3, [r2, #6]
 142:Application/motor.c ****     CAN_Send_Data[7] = c4;
 598              		.loc 1 142 5 is_stmt 1 view .LVU196
 599              		.loc 1 142 22 is_stmt 0 view .LVU197
 600 0046 D471     		strb	r4, [r2, #7]
 143:Application/motor.c **** 
 144:Application/motor.c ****     return HAL_CAN_AddTxMessage(_hcan, &TX_MSG, CAN_Send_Data, &send_mail_box);
 601              		.loc 1 144 5 is_stmt 1 view .LVU198
 602              		.loc 1 144 12 is_stmt 0 view .LVU199
 603 0048 01AB     		add	r3, sp, #4
 604 004a FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 605              	.LVL30:
 145:Application/motor.c **** }
 606              		.loc 1 145 1 view .LVU200
 607 004e 03B0     		add	sp, sp, #12
 608              	.LCFI11:
 609              		.cfi_def_cfa_offset 12
 610              		@ sp needed
 611 0050 30BD     		pop	{r4, r5, pc}
 612              	.LVL31:
 613              	.L25:
 614              		.loc 1 145 1 view .LVU201
 615 0052 00BF     		.align	2
 616              	.L24:
 617 0054 00000000 		.word	.LANCHOR2
 618 0058 00000000 		.word	.LANCHOR3
 619              		.cfi_endproc
 620              	.LFE177:
 622              		.section	.text.Get_LK_Info,"ax",%progbits
 623              		.align	1
 624              		.global	Get_LK_Info
 625              		.syntax unified
 626              		.thumb
 627              		.thumb_func
 629              	Get_LK_Info:
 630              	.LVL32:
 631              	.LFB178:
 146:Application/motor.c **** 
 147:Application/motor.c **** /* -------------------------------- LK motor -------------------------------- */
 148:Application/motor.c **** void Get_LK_Info(motor_info *ptr, uint8_t *aData)
 149:Application/motor.c **** {
 632              		.loc 1 149 1 is_stmt 1 view -0
 633              		.cfi_startproc
 634              		@ args = 0, pretend = 0, frame = 0
 635              		@ frame_needed = 0, uses_anonymous_args = 0
 636              		.loc 1 149 1 is_stmt 0 view .LVU203
 637 0000 10B5     		push	{r4, lr}
 638              	.LCFI12:
 639              		.cfi_def_cfa_offset 8
 640              		.cfi_offset 4, -8
 641              		.cfi_offset 14, -4
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 15


 642 0002 0446     		mov	r4, r0
 150:Application/motor.c ****     if (ptr->Direction != NEGATIVE)
 643              		.loc 1 150 5 is_stmt 1 view .LVU204
 644              		.loc 1 150 12 is_stmt 0 view .LVU205
 645 0004 437D     		ldrb	r3, [r0, #21]	@ zero_extendqisi2
 646              		.loc 1 150 8 view .LVU206
 647 0006 012B     		cmp	r3, #1
 648 0008 4CD0     		beq	.L27
 151:Application/motor.c ****     {
 152:Application/motor.c ****         ptr->RawAngle = (uint16_t)(aData[7] << 8 | aData[6]);
 649              		.loc 1 152 9 is_stmt 1 view .LVU207
 650              		.loc 1 152 41 is_stmt 0 view .LVU208
 651 000a CA79     		ldrb	r2, [r1, #7]	@ zero_extendqisi2
 652              		.loc 1 152 57 view .LVU209
 653 000c 8B79     		ldrb	r3, [r1, #6]	@ zero_extendqisi2
 654              		.loc 1 152 25 view .LVU210
 655 000e 43EA0223 		orr	r3, r3, r2, lsl #8
 656              		.loc 1 152 23 view .LVU211
 657 0012 8385     		strh	r3, [r0, #44]	@ movhi
 153:Application/motor.c ****         ptr->velocity_in_rpm = (int16_t)(aData[5] << 8 | aData[4]) * 0.159154943f;
 658              		.loc 1 153 9 is_stmt 1 view .LVU212
 659              		.loc 1 153 47 is_stmt 0 view .LVU213
 660 0014 4A79     		ldrb	r2, [r1, #5]	@ zero_extendqisi2
 661              		.loc 1 153 63 view .LVU214
 662 0016 0B79     		ldrb	r3, [r1, #4]	@ zero_extendqisi2
 663              		.loc 1 153 32 view .LVU215
 664 0018 43EA0223 		orr	r3, r3, r2, lsl #8
 665 001c 1BB2     		sxth	r3, r3
 666 001e 07EE903A 		vmov	s15, r3	@ int
 667              		.loc 1 153 68 view .LVU216
 668 0022 F8EEE77A 		vcvt.f32.s32	s15, s15
 669 0026 9FED317A 		vldr.32	s14, .L32
 670 002a 67EE877A 		vmul.f32	s15, s15, s14
 671              		.loc 1 153 30 view .LVU217
 672 002e FDEEE77A 		vcvt.s32.f32	s15, s15
 673 0032 17EE903A 		vmov	r3, s15	@ int
 674 0036 8381     		strh	r3, [r0, #12]	@ movhi
 675              	.L28:
 154:Application/motor.c ****     }
 155:Application/motor.c ****     else
 156:Application/motor.c ****     {
 157:Application/motor.c ****         ptr->RawAngle = 32767 - (uint16_t)(aData[7] << 8 | aData[6]);
 158:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[5] << 8 | aData[4]) * 0.159154943f;
 159:Application/motor.c ****     }
 160:Application/motor.c **** 
 161:Application/motor.c ****     ptr->Real_Current = (int16_t)(aData[3] << 8 | aData[2]);
 676              		.loc 1 161 5 is_stmt 1 view .LVU218
 677              		.loc 1 161 40 is_stmt 0 view .LVU219
 678 0038 CA78     		ldrb	r2, [r1, #3]	@ zero_extendqisi2
 679              		.loc 1 161 56 view .LVU220
 680 003a 8B78     		ldrb	r3, [r1, #2]	@ zero_extendqisi2
 681              		.loc 1 161 25 view .LVU221
 682 003c 43EA0223 		orr	r3, r3, r2, lsl #8
 683 0040 1BB2     		sxth	r3, r3
 684              		.loc 1 161 23 view .LVU222
 685 0042 07EE903A 		vmov	s15, r3	@ int
 686 0046 F8EEE77A 		vcvt.f32.s32	s15, s15
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 16


 687 004a C4ED047A 		vstr.32	s15, [r4, #16]
 162:Application/motor.c ****     ptr->Temperature = aData[1];
 688              		.loc 1 162 5 is_stmt 1 view .LVU223
 689              		.loc 1 162 22 is_stmt 0 view .LVU224
 690 004e 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 691 0050 2375     		strb	r3, [r4, #20]
 163:Application/motor.c **** 
 164:Application/motor.c ****     if (ptr->RawAngle - ptr->last_angle > 32767)
 692              		.loc 1 164 5 is_stmt 1 view .LVU225
 693              		.loc 1 164 12 is_stmt 0 view .LVU226
 694 0052 A38D     		ldrh	r3, [r4, #44]
 695              		.loc 1 164 28 view .LVU227
 696 0054 228F     		ldrh	r2, [r4, #56]
 697              		.loc 1 164 23 view .LVU228
 698 0056 9A1A     		subs	r2, r3, r2
 699              		.loc 1 164 8 view .LVU229
 700 0058 B2F5004F 		cmp	r2, #32768
 701 005c 3EDB     		blt	.L29
 165:Application/motor.c ****         ptr->round_cnt--;
 702              		.loc 1 165 9 is_stmt 1 view .LVU230
 703              		.loc 1 165 12 is_stmt 0 view .LVU231
 704 005e 226C     		ldr	r2, [r4, #64]
 705              		.loc 1 165 23 view .LVU232
 706 0060 013A     		subs	r2, r2, #1
 707 0062 2264     		str	r2, [r4, #64]
 708              	.L30:
 166:Application/motor.c ****     else if (ptr->RawAngle - ptr->last_angle < -32767)
 167:Application/motor.c ****         ptr->round_cnt++;
 168:Application/motor.c **** 
 169:Application/motor.c ****     ptr->Angle = loop_float_constrain(ptr->RawAngle - ptr->zero_offset, -32767, 32767);
 709              		.loc 1 169 5 is_stmt 1 view .LVU233
 710              		.loc 1 169 58 is_stmt 0 view .LVU234
 711 0064 B4F93C20 		ldrsh	r2, [r4, #60]
 712              		.loc 1 169 53 view .LVU235
 713 0068 9B1A     		subs	r3, r3, r2
 714 006a 00EE103A 		vmov	s0, r3	@ int
 715              		.loc 1 169 18 view .LVU236
 716 006e 9FED201A 		vldr.32	s2, .L32+4
 717 0072 DFED200A 		vldr.32	s1, .L32+8
 718 0076 B8EEC00A 		vcvt.f32.s32	s0, s0
 719 007a FFF7FEFF 		bl	loop_float_constrain
 720              	.LVL33:
 721              		.loc 1 169 16 view .LVU237
 722 007e 84ED090A 		vstr.32	s0, [r4, #36]
 170:Application/motor.c **** 
 171:Application/motor.c ****     ptr->angle_in_degree = ptr->Angle * 0.00549324788281f;
 723              		.loc 1 171 5 is_stmt 1 view .LVU238
 724              		.loc 1 171 39 is_stmt 0 view .LVU239
 725 0082 DFED1D7A 		vldr.32	s15, .L32+12
 726 0086 20EE270A 		vmul.f32	s0, s0, s15
 727              		.loc 1 171 26 view .LVU240
 728 008a 84ED0A0A 		vstr.32	s0, [r4, #40]
 172:Application/motor.c **** 
 173:Application/motor.c ****     ptr->total_angle = ptr->round_cnt * 65535 + ptr->RawAngle - ptr->offset_angle;
 729              		.loc 1 173 5 is_stmt 1 view .LVU241
 730              		.loc 1 173 27 is_stmt 0 view .LVU242
 731 008e 236C     		ldr	r3, [r4, #64]
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 17


 732              		.loc 1 173 39 view .LVU243
 733 0090 C3EB0343 		rsb	r3, r3, r3, lsl #16
 734              		.loc 1 173 52 view .LVU244
 735 0094 A28D     		ldrh	r2, [r4, #44]
 736              		.loc 1 173 47 view .LVU245
 737 0096 1344     		add	r3, r3, r2
 738              		.loc 1 173 68 view .LVU246
 739 0098 B4F93A10 		ldrsh	r1, [r4, #58]
 740              		.loc 1 173 63 view .LVU247
 741 009c 5B1A     		subs	r3, r3, r1
 742              		.loc 1 173 22 view .LVU248
 743 009e 6364     		str	r3, [r4, #68]
 174:Application/motor.c **** 
 175:Application/motor.c ****     ptr->last_angle = ptr->RawAngle; // update last_angle
 744              		.loc 1 175 5 is_stmt 1 view .LVU249
 745              		.loc 1 175 21 is_stmt 0 view .LVU250
 746 00a0 2287     		strh	r2, [r4, #56]	@ movhi
 176:Application/motor.c **** }
 747              		.loc 1 176 1 view .LVU251
 748 00a2 10BD     		pop	{r4, pc}
 749              	.LVL34:
 750              	.L27:
 157:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[5] << 8 | aData[4]) * 0.159154943f;
 751              		.loc 1 157 9 is_stmt 1 view .LVU252
 157:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[5] << 8 | aData[4]) * 0.159154943f;
 752              		.loc 1 157 49 is_stmt 0 view .LVU253
 753 00a4 CA79     		ldrb	r2, [r1, #7]	@ zero_extendqisi2
 157:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[5] << 8 | aData[4]) * 0.159154943f;
 754              		.loc 1 157 65 view .LVU254
 755 00a6 8B79     		ldrb	r3, [r1, #6]	@ zero_extendqisi2
 157:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[5] << 8 | aData[4]) * 0.159154943f;
 756              		.loc 1 157 33 view .LVU255
 757 00a8 43EA0223 		orr	r3, r3, r2, lsl #8
 157:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[5] << 8 | aData[4]) * 0.159154943f;
 758              		.loc 1 157 31 view .LVU256
 759 00ac C3F5FF43 		rsb	r3, r3, #32640
 760 00b0 7F33     		adds	r3, r3, #127
 157:Application/motor.c ****         ptr->velocity_in_rpm = -(int16_t)(aData[5] << 8 | aData[4]) * 0.159154943f;
 761              		.loc 1 157 23 view .LVU257
 762 00b2 8385     		strh	r3, [r0, #44]	@ movhi
 158:Application/motor.c ****     }
 763              		.loc 1 158 9 is_stmt 1 view .LVU258
 158:Application/motor.c ****     }
 764              		.loc 1 158 48 is_stmt 0 view .LVU259
 765 00b4 4A79     		ldrb	r2, [r1, #5]	@ zero_extendqisi2
 158:Application/motor.c ****     }
 766              		.loc 1 158 64 view .LVU260
 767 00b6 0B79     		ldrb	r3, [r1, #4]	@ zero_extendqisi2
 158:Application/motor.c ****     }
 768              		.loc 1 158 33 view .LVU261
 769 00b8 43EA0223 		orr	r3, r3, r2, lsl #8
 770 00bc 1BB2     		sxth	r3, r3
 158:Application/motor.c ****     }
 771              		.loc 1 158 32 view .LVU262
 772 00be 5B42     		rsbs	r3, r3, #0
 773 00c0 07EE903A 		vmov	s15, r3	@ int
 158:Application/motor.c ****     }
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 18


 774              		.loc 1 158 69 view .LVU263
 775 00c4 F8EEE77A 		vcvt.f32.s32	s15, s15
 776 00c8 9FED087A 		vldr.32	s14, .L32
 777 00cc 67EE877A 		vmul.f32	s15, s15, s14
 158:Application/motor.c ****     }
 778              		.loc 1 158 30 view .LVU264
 779 00d0 FDEEE77A 		vcvt.s32.f32	s15, s15
 780 00d4 17EE903A 		vmov	r3, s15	@ int
 781 00d8 8381     		strh	r3, [r0, #12]	@ movhi
 782 00da ADE7     		b	.L28
 783              	.L29:
 166:Application/motor.c ****         ptr->round_cnt++;
 784              		.loc 1 166 10 is_stmt 1 view .LVU265
 166:Application/motor.c ****         ptr->round_cnt++;
 785              		.loc 1 166 13 is_stmt 0 view .LVU266
 786 00dc 12F5004F 		cmn	r2, #32768
 787 00e0 C0DC     		bgt	.L30
 167:Application/motor.c **** 
 788              		.loc 1 167 9 is_stmt 1 view .LVU267
 167:Application/motor.c **** 
 789              		.loc 1 167 12 is_stmt 0 view .LVU268
 790 00e2 226C     		ldr	r2, [r4, #64]
 167:Application/motor.c **** 
 791              		.loc 1 167 23 view .LVU269
 792 00e4 0132     		adds	r2, r2, #1
 793 00e6 2264     		str	r2, [r4, #64]
 794 00e8 BCE7     		b	.L30
 795              	.L33:
 796 00ea 00BF     		.align	2
 797              	.L32:
 798 00ec 83F9223E 		.word	1042479491
 799 00f0 00FEFF46 		.word	1191181824
 800 00f4 00FEFFC6 		.word	-956301824
 801 00f8 B400B43B 		.word	1001652404
 802              		.cfi_endproc
 803              	.LFE178:
 805              		.section	.text.Get_LK_Offset,"ax",%progbits
 806              		.align	1
 807              		.global	Get_LK_Offset
 808              		.syntax unified
 809              		.thumb
 810              		.thumb_func
 812              	Get_LK_Offset:
 813              	.LVL35:
 814              	.LFB179:
 177:Application/motor.c **** 
 178:Application/motor.c **** /*this function should be called after system+can init */
 179:Application/motor.c **** void Get_LK_Offset(motor_info *ptr, uint8_t *aData)
 180:Application/motor.c **** {
 815              		.loc 1 180 1 is_stmt 1 view -0
 816              		.cfi_startproc
 817              		@ args = 0, pretend = 0, frame = 0
 818              		@ frame_needed = 0, uses_anonymous_args = 0
 819              		@ link register save eliminated.
 181:Application/motor.c ****     ptr->RawAngle = (uint16_t)(aData[7] << 8 | aData[6]);
 820              		.loc 1 181 5 view .LVU271
 821              		.loc 1 181 37 is_stmt 0 view .LVU272
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 19


 822 0000 CA79     		ldrb	r2, [r1, #7]	@ zero_extendqisi2
 823              		.loc 1 181 53 view .LVU273
 824 0002 8B79     		ldrb	r3, [r1, #6]	@ zero_extendqisi2
 825              		.loc 1 181 46 view .LVU274
 826 0004 43EA0223 		orr	r3, r3, r2, lsl #8
 827              		.loc 1 181 19 view .LVU275
 828 0008 8385     		strh	r3, [r0, #44]	@ movhi
 182:Application/motor.c ****     ptr->offset_angle = ptr->RawAngle;
 829              		.loc 1 182 5 is_stmt 1 view .LVU276
 830              		.loc 1 182 23 is_stmt 0 view .LVU277
 831 000a 4387     		strh	r3, [r0, #58]	@ movhi
 183:Application/motor.c ****     ptr->last_angle = ptr->RawAngle; // update last_angle
 832              		.loc 1 183 5 is_stmt 1 view .LVU278
 833              		.loc 1 183 21 is_stmt 0 view .LVU279
 834 000c 0387     		strh	r3, [r0, #56]	@ movhi
 184:Application/motor.c **** }
 835              		.loc 1 184 1 view .LVU280
 836 000e 7047     		bx	lr
 837              		.cfi_endproc
 838              	.LFE179:
 840              		.section	.text.Send_LK_Current,"ax",%progbits
 841              		.align	1
 842              		.global	Send_LK_Current
 843              		.syntax unified
 844              		.thumb
 845              		.thumb_func
 847              	Send_LK_Current:
 848              	.LVL36:
 849              	.LFB180:
 185:Application/motor.c **** 
 186:Application/motor.c **** /**
 187:Application/motor.c ****   * @Func	    void Send_RMD_Current(CAN_HandleTypeDef* hcan,
 188:Application/motor.c ****                                     int16_t c1, int16_t c2, int16_t c3, int16_t c4)
 189:Application/motor.c ****   * @Brief
 190:Application/motor.c ****   * @Param	    cx x=1,2,3,4
 191:Application/motor.c ****   * @Retval	    None
 192:Application/motor.c ****   * @Date       2019/11/5
 193:Application/motor.c ****  **/
 194:Application/motor.c **** HAL_StatusTypeDef Send_LK_Current(CAN_HandleTypeDef *_hcan,
 195:Application/motor.c ****                                   int16_t c1, int16_t c2, int16_t c3, int16_t c4)
 196:Application/motor.c **** {
 850              		.loc 1 196 1 is_stmt 1 view -0
 851              		.cfi_startproc
 852              		@ args = 4, pretend = 0, frame = 8
 853              		@ frame_needed = 0, uses_anonymous_args = 0
 854              		.loc 1 196 1 is_stmt 0 view .LVU282
 855 0000 70B5     		push	{r4, r5, r6, lr}
 856              	.LCFI13:
 857              		.cfi_def_cfa_offset 16
 858              		.cfi_offset 4, -16
 859              		.cfi_offset 5, -12
 860              		.cfi_offset 6, -8
 861              		.cfi_offset 14, -4
 862 0002 82B0     		sub	sp, sp, #8
 863              	.LCFI14:
 864              		.cfi_def_cfa_offset 24
 865 0004 0546     		mov	r5, r0
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 20


 866 0006 1446     		mov	r4, r2
 867 0008 BDF918C0 		ldrsh	ip, [sp, #24]
 197:Application/motor.c ****     static CAN_TxHeaderTypeDef TX_MSG;
 868              		.loc 1 197 5 is_stmt 1 view .LVU283
 198:Application/motor.c ****     static uint8_t CAN_Send_Data[8];
 869              		.loc 1 198 5 view .LVU284
 199:Application/motor.c ****     uint32_t send_mail_box;
 870              		.loc 1 199 5 view .LVU285
 200:Application/motor.c **** 
 201:Application/motor.c ****     // ï¿½ï¿½ï¿½Ã·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ý°ï¿½ï¿½ï¿½IDï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½IDÎªï¿½Ø¶ï¿½ï
 202:Application/motor.c ****     TX_MSG.StdId = 0x280;
 871              		.loc 1 202 5 view .LVU286
 872              		.loc 1 202 18 is_stmt 0 view .LVU287
 873 000c 2948     		ldr	r0, .L49
 874              	.LVL37:
 875              		.loc 1 202 18 view .LVU288
 876 000e 4FF42072 		mov	r2, #640
 877              	.LVL38:
 878              		.loc 1 202 18 view .LVU289
 879 0012 0260     		str	r2, [r0]
 203:Application/motor.c ****     TX_MSG.IDE = CAN_ID_STD;
 880              		.loc 1 203 5 is_stmt 1 view .LVU290
 881              		.loc 1 203 16 is_stmt 0 view .LVU291
 882 0014 0022     		movs	r2, #0
 883 0016 8260     		str	r2, [r0, #8]
 204:Application/motor.c ****     TX_MSG.RTR = CAN_RTR_DATA;
 884              		.loc 1 204 5 is_stmt 1 view .LVU292
 885              		.loc 1 204 16 is_stmt 0 view .LVU293
 886 0018 C260     		str	r2, [r0, #12]
 205:Application/motor.c ****     TX_MSG.DLC = 0x08;
 887              		.loc 1 205 5 is_stmt 1 view .LVU294
 888              		.loc 1 205 16 is_stmt 0 view .LVU295
 889 001a 0826     		movs	r6, #8
 890 001c 0661     		str	r6, [r0, #16]
 206:Application/motor.c **** 
 207:Application/motor.c ****     // ï¿½ï¿½ï¿½ï¿½C620ï¿½ï¿½ï¿½ï¿½?ï¿½ï¿½ï¿½ï¿½ï¿½Ãµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½?
 208:Application/motor.c ****     CAN_Send_Data[0] = c1;
 891              		.loc 1 208 5 is_stmt 1 view .LVU296
 892              		.loc 1 208 22 is_stmt 0 view .LVU297
 893 001e 2648     		ldr	r0, .L49+4
 894 0020 0170     		strb	r1, [r0]
 209:Application/motor.c ****     CAN_Send_Data[1] = (c1 >> 8);
 895              		.loc 1 209 5 is_stmt 1 view .LVU298
 896              		.loc 1 209 22 is_stmt 0 view .LVU299
 897 0022 3141     		asrs	r1, r1, r6
 898              	.LVL39:
 899              		.loc 1 209 22 view .LVU300
 900 0024 4170     		strb	r1, [r0, #1]
 210:Application/motor.c ****     CAN_Send_Data[2] = c2;
 901              		.loc 1 210 5 is_stmt 1 view .LVU301
 902              		.loc 1 210 22 is_stmt 0 view .LVU302
 903 0026 8470     		strb	r4, [r0, #2]
 211:Application/motor.c ****     CAN_Send_Data[3] = (c2 >> 8);
 904              		.loc 1 211 5 is_stmt 1 view .LVU303
 905              		.loc 1 211 22 is_stmt 0 view .LVU304
 906 0028 3441     		asrs	r4, r4, r6
 907 002a C470     		strb	r4, [r0, #3]
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 21


 212:Application/motor.c ****     CAN_Send_Data[4] = c3;
 908              		.loc 1 212 5 is_stmt 1 view .LVU305
 909              		.loc 1 212 22 is_stmt 0 view .LVU306
 910 002c 0371     		strb	r3, [r0, #4]
 213:Application/motor.c ****     CAN_Send_Data[5] = (c3 >> 8);
 911              		.loc 1 213 5 is_stmt 1 view .LVU307
 912              		.loc 1 213 22 is_stmt 0 view .LVU308
 913 002e 3341     		asrs	r3, r3, r6
 914              	.LVL40:
 915              		.loc 1 213 22 view .LVU309
 916 0030 4371     		strb	r3, [r0, #5]
 214:Application/motor.c ****     CAN_Send_Data[6] = c4;
 917              		.loc 1 214 5 is_stmt 1 view .LVU310
 918              		.loc 1 214 22 is_stmt 0 view .LVU311
 919 0032 80F806C0 		strb	ip, [r0, #6]
 215:Application/motor.c ****     CAN_Send_Data[7] = (c4 >> 8);
 920              		.loc 1 215 5 is_stmt 1 view .LVU312
 921              		.loc 1 215 22 is_stmt 0 view .LVU313
 922 0036 4CFA06FC 		asr	ip, ip, r6
 923 003a 80F807C0 		strb	ip, [r0, #7]
 216:Application/motor.c **** 
 217:Application/motor.c ****     uint32_t count = 0;
 924              		.loc 1 217 5 is_stmt 1 view .LVU314
 925              	.LVL41:
 218:Application/motor.c ****     while (!((_hcan->State == HAL_CAN_STATE_READY) || (_hcan->State == HAL_CAN_STATE_LISTENING)))
 926              		.loc 1 218 5 view .LVU315
 927              	.L36:
 928              		.loc 1 218 11 view .LVU316
 929              		.loc 1 218 20 is_stmt 0 view .LVU317
 930 003e 95F82030 		ldrb	r3, [r5, #32]	@ zero_extendqisi2
 931 0042 DBB2     		uxtb	r3, r3
 932              		.loc 1 218 11 view .LVU318
 933 0044 012B     		cmp	r3, #1
 934 0046 0DD0     		beq	.L46
 935              		.loc 1 218 61 discriminator 1 view .LVU319
 936 0048 95F82030 		ldrb	r3, [r5, #32]	@ zero_extendqisi2
 937 004c DBB2     		uxtb	r3, r3
 938              		.loc 1 218 12 discriminator 1 view .LVU320
 939 004e 022B     		cmp	r3, #2
 940 0050 06D0     		beq	.L48
 219:Application/motor.c ****     {
 220:Application/motor.c ****         count++;
 941              		.loc 1 220 9 is_stmt 1 view .LVU321
 942              		.loc 1 220 14 is_stmt 0 view .LVU322
 943 0052 0132     		adds	r2, r2, #1
 944              	.LVL42:
 221:Application/motor.c ****         if (count > 10000)
 945              		.loc 1 221 9 is_stmt 1 view .LVU323
 946              		.loc 1 221 12 is_stmt 0 view .LVU324
 947 0054 42F21073 		movw	r3, #10000
 948 0058 9A42     		cmp	r2, r3
 949 005a F0D9     		bls	.L36
 950 005c 0024     		movs	r4, #0
 951 005e 02E0     		b	.L40
 952              	.L48:
 953              		.loc 1 221 12 view .LVU325
 954 0060 0024     		movs	r4, #0
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 22


 955 0062 00E0     		b	.L40
 956              	.L46:
 957 0064 0024     		movs	r4, #0
 958              	.LVL43:
 959              	.L40:
 222:Application/motor.c ****             break;
 223:Application/motor.c ****     }
 224:Application/motor.c ****     count = 0;
 225:Application/motor.c ****     while (HAL_CAN_GetTxMailboxesFreeLevel(_hcan) == 0) // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ä¶¼ï¿½ï¿½ï
 960              		.loc 1 225 11 is_stmt 1 view .LVU326
 961              		.loc 1 225 12 is_stmt 0 view .LVU327
 962 0066 2846     		mov	r0, r5
 963 0068 FFF7FEFF 		bl	HAL_CAN_GetTxMailboxesFreeLevel
 964              	.LVL44:
 965              		.loc 1 225 11 view .LVU328
 966 006c 20B9     		cbnz	r0, .L39
 226:Application/motor.c ****     {
 227:Application/motor.c ****         count++;
 967              		.loc 1 227 9 is_stmt 1 view .LVU329
 968              		.loc 1 227 14 is_stmt 0 view .LVU330
 969 006e 0134     		adds	r4, r4, #1
 970              	.LVL45:
 228:Application/motor.c ****         if (count > 10000)
 971              		.loc 1 228 9 is_stmt 1 view .LVU331
 972              		.loc 1 228 12 is_stmt 0 view .LVU332
 973 0070 42F21073 		movw	r3, #10000
 974 0074 9C42     		cmp	r4, r3
 975 0076 F6D9     		bls	.L40
 976              	.L39:
 229:Application/motor.c ****             break;
 230:Application/motor.c ****     }
 231:Application/motor.c ****     /* Check Tx Mailbox 1 status */
 232:Application/motor.c ****     if ((_hcan->Instance->TSR & CAN_TSR_TME0) != 0U)
 977              		.loc 1 232 5 is_stmt 1 view .LVU333
 978              		.loc 1 232 15 is_stmt 0 view .LVU334
 979 0078 2B68     		ldr	r3, [r5]
 980              		.loc 1 232 25 view .LVU335
 981 007a 9A68     		ldr	r2, [r3, #8]
 982              		.loc 1 232 8 view .LVU336
 983 007c 12F0806F 		tst	r2, #67108864
 984 0080 09D0     		beq	.L42
 233:Application/motor.c ****     {
 234:Application/motor.c ****         send_mail_box = CAN_TX_MAILBOX0;
 985              		.loc 1 234 9 is_stmt 1 view .LVU337
 986              		.loc 1 234 23 is_stmt 0 view .LVU338
 987 0082 0123     		movs	r3, #1
 988 0084 0193     		str	r3, [sp, #4]
 989              	.L43:
 235:Application/motor.c ****     }
 236:Application/motor.c ****     /* Check Tx Mailbox 1 status */
 237:Application/motor.c ****     else if ((_hcan->Instance->TSR & CAN_TSR_TME1) != 0U)
 238:Application/motor.c ****     {
 239:Application/motor.c ****         send_mail_box = CAN_TX_MAILBOX1;
 240:Application/motor.c ****     }
 241:Application/motor.c **** 
 242:Application/motor.c ****     /* Check Tx Mailbox 2 status */
 243:Application/motor.c ****     else if ((_hcan->Instance->TSR & CAN_TSR_TME2) != 0U)
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 23


 244:Application/motor.c ****     {
 245:Application/motor.c ****         send_mail_box = CAN_TX_MAILBOX2;
 246:Application/motor.c ****     }
 247:Application/motor.c ****     return HAL_CAN_AddTxMessage(_hcan, &TX_MSG, CAN_Send_Data, &send_mail_box);
 990              		.loc 1 247 5 is_stmt 1 view .LVU339
 991              		.loc 1 247 12 is_stmt 0 view .LVU340
 992 0086 01AB     		add	r3, sp, #4
 993 0088 0B4A     		ldr	r2, .L49+4
 994 008a 0A49     		ldr	r1, .L49
 995 008c 2846     		mov	r0, r5
 996 008e FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 997              	.LVL46:
 248:Application/motor.c **** }
 998              		.loc 1 248 1 view .LVU341
 999 0092 02B0     		add	sp, sp, #8
 1000              	.LCFI15:
 1001              		.cfi_remember_state
 1002              		.cfi_def_cfa_offset 16
 1003              		@ sp needed
 1004 0094 70BD     		pop	{r4, r5, r6, pc}
 1005              	.LVL47:
 1006              	.L42:
 1007              	.LCFI16:
 1008              		.cfi_restore_state
 237:Application/motor.c ****     {
 1009              		.loc 1 237 10 is_stmt 1 view .LVU342
 237:Application/motor.c ****     {
 1010              		.loc 1 237 30 is_stmt 0 view .LVU343
 1011 0096 9A68     		ldr	r2, [r3, #8]
 237:Application/motor.c ****     {
 1012              		.loc 1 237 13 view .LVU344
 1013 0098 12F0006F 		tst	r2, #134217728
 1014 009c 02D0     		beq	.L44
 239:Application/motor.c ****     }
 1015              		.loc 1 239 9 is_stmt 1 view .LVU345
 239:Application/motor.c ****     }
 1016              		.loc 1 239 23 is_stmt 0 view .LVU346
 1017 009e 0223     		movs	r3, #2
 1018 00a0 0193     		str	r3, [sp, #4]
 1019 00a2 F0E7     		b	.L43
 1020              	.L44:
 243:Application/motor.c ****     {
 1021              		.loc 1 243 10 is_stmt 1 view .LVU347
 243:Application/motor.c ****     {
 1022              		.loc 1 243 30 is_stmt 0 view .LVU348
 1023 00a4 9B68     		ldr	r3, [r3, #8]
 243:Application/motor.c ****     {
 1024              		.loc 1 243 13 view .LVU349
 1025 00a6 13F0805F 		tst	r3, #268435456
 1026 00aa ECD0     		beq	.L43
 245:Application/motor.c ****     }
 1027              		.loc 1 245 9 is_stmt 1 view .LVU350
 245:Application/motor.c ****     }
 1028              		.loc 1 245 23 is_stmt 0 view .LVU351
 1029 00ac 0423     		movs	r3, #4
 1030 00ae 0193     		str	r3, [sp, #4]
 1031 00b0 E9E7     		b	.L43
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 24


 1032              	.L50:
 1033 00b2 00BF     		.align	2
 1034              	.L49:
 1035 00b4 00000000 		.word	.LANCHOR4
 1036 00b8 00000000 		.word	.LANCHOR5
 1037              		.cfi_endproc
 1038              	.LFE180:
 1040              		.section	.text.Send_LK_Current_Single,"ax",%progbits
 1041              		.align	1
 1042              		.global	Send_LK_Current_Single
 1043              		.syntax unified
 1044              		.thumb
 1045              		.thumb_func
 1047              	Send_LK_Current_Single:
 1048              	.LVL48:
 1049              	.LFB181:
 249:Application/motor.c **** 
 250:Application/motor.c **** /**
 251:Application/motor.c ****   * @Func	    void Send_RMD_Current(CAN_HandleTypeDef* hcan,
 252:Application/motor.c ****                                     int16_t c1, int16_t c2, int16_t c3, int16_t c4)
 253:Application/motor.c ****   * @Brief
 254:Application/motor.c ****   * @Param	    cx x=1,2,3,4
 255:Application/motor.c ****   * @Retval	    None
 256:Application/motor.c ****   * @Date       2019/11/5
 257:Application/motor.c ****  **/
 258:Application/motor.c **** HAL_StatusTypeDef Send_LK_Current_Single(CAN_HandleTypeDef *_hcan,
 259:Application/motor.c ****                                          int8_t ID, int16_t c)
 260:Application/motor.c **** {
 1050              		.loc 1 260 1 is_stmt 1 view -0
 1051              		.cfi_startproc
 1052              		@ args = 0, pretend = 0, frame = 8
 1053              		@ frame_needed = 0, uses_anonymous_args = 0
 1054              		.loc 1 260 1 is_stmt 0 view .LVU353
 1055 0000 00B5     		push	{lr}
 1056              	.LCFI17:
 1057              		.cfi_def_cfa_offset 4
 1058              		.cfi_offset 14, -4
 1059 0002 83B0     		sub	sp, sp, #12
 1060              	.LCFI18:
 1061              		.cfi_def_cfa_offset 16
 1062 0004 9446     		mov	ip, r2
 261:Application/motor.c ****     static CAN_TxHeaderTypeDef TX_MSG;
 1063              		.loc 1 261 5 is_stmt 1 view .LVU354
 262:Application/motor.c ****     static uint8_t CAN_Send_Data[8];
 1064              		.loc 1 262 5 view .LVU355
 263:Application/motor.c ****     uint32_t send_mail_box;
 1065              		.loc 1 263 5 view .LVU356
 264:Application/motor.c **** 
 265:Application/motor.c ****     TX_MSG.StdId = 0x140 + ID;
 1066              		.loc 1 265 5 view .LVU357
 1067              		.loc 1 265 26 is_stmt 0 view .LVU358
 1068 0006 01F5A073 		add	r3, r1, #320
 1069              		.loc 1 265 18 view .LVU359
 1070 000a 0E49     		ldr	r1, .L53
 1071              	.LVL49:
 1072              		.loc 1 265 18 view .LVU360
 1073 000c 0B60     		str	r3, [r1]
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 25


 266:Application/motor.c ****     TX_MSG.IDE = CAN_ID_STD;
 1074              		.loc 1 266 5 is_stmt 1 view .LVU361
 1075              		.loc 1 266 16 is_stmt 0 view .LVU362
 1076 000e 0023     		movs	r3, #0
 1077 0010 8B60     		str	r3, [r1, #8]
 267:Application/motor.c ****     TX_MSG.RTR = CAN_RTR_DATA;
 1078              		.loc 1 267 5 is_stmt 1 view .LVU363
 1079              		.loc 1 267 16 is_stmt 0 view .LVU364
 1080 0012 CB60     		str	r3, [r1, #12]
 268:Application/motor.c ****     TX_MSG.DLC = 0x08;
 1081              		.loc 1 268 5 is_stmt 1 view .LVU365
 1082              		.loc 1 268 16 is_stmt 0 view .LVU366
 1083 0014 0822     		movs	r2, #8
 1084              	.LVL50:
 1085              		.loc 1 268 16 view .LVU367
 1086 0016 0A61     		str	r2, [r1, #16]
 269:Application/motor.c **** 
 270:Application/motor.c ****     CAN_Send_Data[0] = 0xA1;
 1087              		.loc 1 270 5 is_stmt 1 view .LVU368
 1088              		.loc 1 270 22 is_stmt 0 view .LVU369
 1089 0018 0B4A     		ldr	r2, .L53+4
 1090 001a 4FF0A10E 		mov	lr, #161
 1091 001e 82F800E0 		strb	lr, [r2]
 271:Application/motor.c ****     CAN_Send_Data[1] = 0;
 1092              		.loc 1 271 5 is_stmt 1 view .LVU370
 1093              		.loc 1 271 22 is_stmt 0 view .LVU371
 1094 0022 5370     		strb	r3, [r2, #1]
 272:Application/motor.c ****     CAN_Send_Data[2] = 0;
 1095              		.loc 1 272 5 is_stmt 1 view .LVU372
 1096              		.loc 1 272 22 is_stmt 0 view .LVU373
 1097 0024 9370     		strb	r3, [r2, #2]
 273:Application/motor.c ****     CAN_Send_Data[3] = 0;
 1098              		.loc 1 273 5 is_stmt 1 view .LVU374
 1099              		.loc 1 273 22 is_stmt 0 view .LVU375
 1100 0026 D370     		strb	r3, [r2, #3]
 274:Application/motor.c ****     CAN_Send_Data[4] = c;
 1101              		.loc 1 274 5 is_stmt 1 view .LVU376
 1102              		.loc 1 274 22 is_stmt 0 view .LVU377
 1103 0028 82F804C0 		strb	ip, [r2, #4]
 275:Application/motor.c ****     CAN_Send_Data[5] = (c >> 8);
 1104              		.loc 1 275 5 is_stmt 1 view .LVU378
 1105              		.loc 1 275 22 is_stmt 0 view .LVU379
 1106 002c 4FEA2C2C 		asr	ip, ip, #8
 1107 0030 82F805C0 		strb	ip, [r2, #5]
 276:Application/motor.c ****     CAN_Send_Data[6] = 0;
 1108              		.loc 1 276 5 is_stmt 1 view .LVU380
 1109              		.loc 1 276 22 is_stmt 0 view .LVU381
 1110 0034 9371     		strb	r3, [r2, #6]
 277:Application/motor.c ****     CAN_Send_Data[7] = 0;
 1111              		.loc 1 277 5 is_stmt 1 view .LVU382
 1112              		.loc 1 277 22 is_stmt 0 view .LVU383
 1113 0036 D371     		strb	r3, [r2, #7]
 278:Application/motor.c **** 
 279:Application/motor.c ****     // uint32_t count = 0;
 280:Application/motor.c ****     // while (!((_hcan->State == HAL_CAN_STATE_READY) || (_hcan->State == HAL_CAN_STATE_LISTENING))
 281:Application/motor.c ****     // {
 282:Application/motor.c ****     //     count++;
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 26


 283:Application/motor.c ****     //     if (count > 10000)
 284:Application/motor.c ****     //         break;
 285:Application/motor.c ****     // }
 286:Application/motor.c ****     // count = 0;
 287:Application/motor.c ****     // while (HAL_CAN_GetTxMailboxesFreeLevel(_hcan) == 0)
 288:Application/motor.c ****     // {
 289:Application/motor.c ****     //     count++;
 290:Application/motor.c ****     //     if (count > 10000)
 291:Application/motor.c ****     //         break;
 292:Application/motor.c ****     // }
 293:Application/motor.c ****     // /* Check Tx Mailbox 1 status */
 294:Application/motor.c ****     // if ((_hcan->Instance->TSR & CAN_TSR_TME0) != 0U)
 295:Application/motor.c ****     // {
 296:Application/motor.c ****     //     send_mail_box = CAN_TX_MAILBOX0;
 297:Application/motor.c ****     // }
 298:Application/motor.c ****     // /* Check Tx Mailbox 1 status */
 299:Application/motor.c ****     // else if ((_hcan->Instance->TSR & CAN_TSR_TME1) != 0U)
 300:Application/motor.c ****     // {
 301:Application/motor.c ****     //     send_mail_box = CAN_TX_MAILBOX1;
 302:Application/motor.c ****     // }
 303:Application/motor.c **** 
 304:Application/motor.c ****     // /* Check Tx Mailbox 2 status */
 305:Application/motor.c ****     // else if ((_hcan->Instance->TSR & CAN_TSR_TME2) != 0U)
 306:Application/motor.c ****     // {
 307:Application/motor.c ****     //     send_mail_box = CAN_TX_MAILBOX2;
 308:Application/motor.c ****     // }
 309:Application/motor.c ****     return HAL_CAN_AddTxMessage(_hcan, &TX_MSG, CAN_Send_Data, &send_mail_box);
 1114              		.loc 1 309 5 is_stmt 1 view .LVU384
 1115              		.loc 1 309 12 is_stmt 0 view .LVU385
 1116 0038 01AB     		add	r3, sp, #4
 1117 003a FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 1118              	.LVL51:
 310:Application/motor.c **** }
 1119              		.loc 1 310 1 view .LVU386
 1120 003e 03B0     		add	sp, sp, #12
 1121              	.LCFI19:
 1122              		.cfi_def_cfa_offset 4
 1123              		@ sp needed
 1124 0040 5DF804FB 		ldr	pc, [sp], #4
 1125              	.L54:
 1126              		.align	2
 1127              	.L53:
 1128 0044 00000000 		.word	.LANCHOR6
 1129 0048 00000000 		.word	.LANCHOR7
 1130              		.cfi_endproc
 1131              	.LFE181:
 1133              		.section	.text.LK8008_Current_Solver,"ax",%progbits
 1134              		.align	1
 1135              		.global	LK8008_Current_Solver
 1136              		.syntax unified
 1137              		.thumb
 1138              		.thumb_func
 1140              	LK8008_Current_Solver:
 1141              	.LVL52:
 1142              	.LFB182:
 311:Application/motor.c **** 
 312:Application/motor.c **** int16_t LK8008_Current_Solver(float torque)
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 27


 313:Application/motor.c **** {
 1143              		.loc 1 313 1 is_stmt 1 view -0
 1144              		.cfi_startproc
 1145              		@ args = 0, pretend = 0, frame = 0
 1146              		@ frame_needed = 0, uses_anonymous_args = 0
 1147              		@ link register save eliminated.
 314:Application/motor.c ****     return torque * LK8008_CURRENT_COEF;
 1148              		.loc 1 314 5 view .LVU388
 1149              		.loc 1 314 19 is_stmt 0 view .LVU389
 1150 0000 DFED047A 		vldr.32	s15, .L56
 1151 0004 20EE270A 		vmul.f32	s0, s0, s15
 1152              	.LVL53:
 1153              		.loc 1 314 19 view .LVU390
 1154 0008 BDEEC00A 		vcvt.s32.f32	s0, s0
 315:Application/motor.c **** }
 1155              		.loc 1 315 1 view .LVU391
 1156 000c 10EE103A 		vmov	r3, s0	@ int
 1157 0010 18B2     		sxth	r0, r3
 1158 0012 7047     		bx	lr
 1159              	.L57:
 1160              		.align	2
 1161              	.L56:
 1162 0014 9A59C943 		.word	1137269146
 1163              		.cfi_endproc
 1164              	.LFE182:
 1166              		.section	.text.DM_CANx_SendStdData,"ax",%progbits
 1167              		.align	1
 1168              		.global	DM_CANx_SendStdData
 1169              		.syntax unified
 1170              		.thumb
 1171              		.thumb_func
 1173              	DM_CANx_SendStdData:
 1174              	.LVL54:
 1175              	.LFB183:
 316:Application/motor.c **** 
 317:Application/motor.c **** /* -------------------------------- dm motor -------------------------------- */
 318:Application/motor.c **** uint8_t Data_Enable[8] = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFC};    // ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½ï
 319:Application/motor.c **** uint8_t Data_Failure[8] = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFD};   // ï¿½ï¿½ï¿½Ê§ï¿½ï¿½ï
 320:Application/motor.c **** uint8_t Data_Save_zero[8] = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE}; // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 321:Application/motor.c **** 
 322:Application/motor.c **** /**
 323:Application/motor.c ****  * @brief  ï¿½ï¿½ï¿½Í±ï¿½×¼IDï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡
 324:Application/motor.c ****  * @param  hcan     CANï¿½Ä¾ï¿½ï¿½
 325:Application/motor.c ****  * @param  ID       ï¿½ï¿½ï¿½ï¿½Ö¡ID
 326:Application/motor.c ****  * @param  pData    ï¿½ï¿½ï¿½ï¿½Ö¸ï¿½ï¿½
 327:Application/motor.c ****  * @param  Len      ï¿½Ö½ï¿½ï¿½ï¿½0~8
 328:Application/motor.c ****  */
 329:Application/motor.c **** uint8_t DM_CANx_SendStdData(CAN_HandleTypeDef *_hcan, uint16_t id, uint8_t cmd, uint16_t len)
 330:Application/motor.c **** {
 1176              		.loc 1 330 1 is_stmt 1 view -0
 1177              		.cfi_startproc
 1178              		@ args = 0, pretend = 0, frame = 0
 1179              		@ frame_needed = 0, uses_anonymous_args = 0
 1180              		.loc 1 330 1 is_stmt 0 view .LVU393
 1181 0000 70B5     		push	{r4, r5, r6, lr}
 1182              	.LCFI20:
 1183              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 28


 1184              		.cfi_offset 4, -16
 1185              		.cfi_offset 5, -12
 1186              		.cfi_offset 6, -8
 1187              		.cfi_offset 14, -4
 1188 0002 0646     		mov	r6, r0
 1189 0004 1546     		mov	r5, r2
 1190 0006 1A46     		mov	r2, r3
 1191              	.LVL55:
 331:Application/motor.c ****     static CAN_TxHeaderTypeDef TX_MSG;
 1192              		.loc 1 331 5 is_stmt 1 view .LVU394
 332:Application/motor.c ****     static uint8_t CAN_Send_Data[8];
 1193              		.loc 1 332 5 view .LVU395
 333:Application/motor.c ****     TX_MSG.StdId = id;
 1194              		.loc 1 333 5 view .LVU396
 1195              		.loc 1 333 18 is_stmt 0 view .LVU397
 1196 0008 194C     		ldr	r4, .L69
 1197 000a 2160     		str	r1, [r4]
 334:Application/motor.c ****     TX_MSG.ExtId = 0;
 1198              		.loc 1 334 5 is_stmt 1 view .LVU398
 1199              		.loc 1 334 18 is_stmt 0 view .LVU399
 1200 000c 0023     		movs	r3, #0
 1201              	.LVL56:
 1202              		.loc 1 334 18 view .LVU400
 1203 000e 6360     		str	r3, [r4, #4]
 335:Application/motor.c ****     TX_MSG.IDE = 0;
 1204              		.loc 1 335 5 is_stmt 1 view .LVU401
 1205              		.loc 1 335 16 is_stmt 0 view .LVU402
 1206 0010 A360     		str	r3, [r4, #8]
 336:Application/motor.c ****     TX_MSG.RTR = 0;
 1207              		.loc 1 336 5 is_stmt 1 view .LVU403
 1208              		.loc 1 336 16 is_stmt 0 view .LVU404
 1209 0012 E360     		str	r3, [r4, #12]
 337:Application/motor.c ****     TX_MSG.DLC = len;
 1210              		.loc 1 337 5 is_stmt 1 view .LVU405
 1211              		.loc 1 337 16 is_stmt 0 view .LVU406
 1212 0014 2261     		str	r2, [r4, #16]
 338:Application/motor.c **** 
 339:Application/motor.c ****     if (cmd == ENABLE_MOTOR)
 1213              		.loc 1 339 5 is_stmt 1 view .LVU407
 1214              		.loc 1 339 8 is_stmt 0 view .LVU408
 1215 0016 012D     		cmp	r5, #1
 1216 0018 04D0     		beq	.L65
 340:Application/motor.c ****         memcpy(CAN_Send_Data, Data_Enable, len);
 341:Application/motor.c ****     else if (cmd == DISABLE_MOTOR)
 1217              		.loc 1 341 10 is_stmt 1 view .LVU409
 1218              		.loc 1 341 13 is_stmt 0 view .LVU410
 1219 001a 45B1     		cbz	r5, .L66
 342:Application/motor.c ****         memcpy(CAN_Send_Data, Data_Failure, len);
 343:Application/motor.c ****     else if (cmd == SAVE_ZERO_MOTOR)
 1220              		.loc 1 343 10 is_stmt 1 view .LVU411
 1221              		.loc 1 343 13 is_stmt 0 view .LVU412
 1222 001c 022D     		cmp	r5, #2
 1223 001e 12D0     		beq	.L67
 344:Application/motor.c ****         memcpy(CAN_Send_Data, Data_Save_zero, len);
 345:Application/motor.c ****     else
 346:Application/motor.c ****         return 1; // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1224              		.loc 1 346 16 view .LVU413
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 29


 1225 0020 0120     		movs	r0, #1
 1226              	.LVL57:
 1227              		.loc 1 346 16 view .LVU414
 1228 0022 0FE0     		b	.L62
 1229              	.LVL58:
 1230              	.L65:
 340:Application/motor.c ****     else if (cmd == DISABLE_MOTOR)
 1231              		.loc 1 340 9 is_stmt 1 view .LVU415
 1232 0024 1349     		ldr	r1, .L69+4
 1233              	.LVL59:
 340:Application/motor.c ****     else if (cmd == DISABLE_MOTOR)
 1234              		.loc 1 340 9 is_stmt 0 view .LVU416
 1235 0026 1448     		ldr	r0, .L69+8
 1236              	.LVL60:
 340:Application/motor.c ****     else if (cmd == DISABLE_MOTOR)
 1237              		.loc 1 340 9 view .LVU417
 1238 0028 FFF7FEFF 		bl	memcpy
 1239              	.LVL61:
 1240 002c 03E0     		b	.L60
 1241              	.LVL62:
 1242              	.L66:
 342:Application/motor.c ****         memcpy(CAN_Send_Data, Data_Failure, len);
 1243              		.loc 1 342 9 is_stmt 1 view .LVU418
 1244 002e 1349     		ldr	r1, .L69+12
 1245              	.LVL63:
 342:Application/motor.c ****         memcpy(CAN_Send_Data, Data_Failure, len);
 1246              		.loc 1 342 9 is_stmt 0 view .LVU419
 1247 0030 1148     		ldr	r0, .L69+8
 1248              	.LVL64:
 342:Application/motor.c ****         memcpy(CAN_Send_Data, Data_Failure, len);
 1249              		.loc 1 342 9 view .LVU420
 1250 0032 FFF7FEFF 		bl	memcpy
 1251              	.LVL65:
 1252              	.L60:
 347:Application/motor.c **** 
 348:Application/motor.c ****     /*ï¿½Òµï¿½ï¿½ÕµÄ·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ä£¬ï¿½ï¿½ï¿½ï¿½ï¿½Ý·ï¿½ï¿½Í³ï¿½È¥*/
 349:Application/motor.c ****     if (HAL_CAN_AddTxMessage(_hcan, &TX_MSG, CAN_Send_Data, (uint32_t *)CAN_TX_MAILBOX0) != HAL_OK)
 1253              		.loc 1 349 5 is_stmt 1 view .LVU421
 1254              		.loc 1 349 9 is_stmt 0 view .LVU422
 1255 0036 0123     		movs	r3, #1
 1256 0038 0F4A     		ldr	r2, .L69+8
 1257 003a 0D49     		ldr	r1, .L69
 1258 003c 3046     		mov	r0, r6
 1259 003e FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 1260              	.LVL66:
 1261              		.loc 1 349 8 view .LVU423
 1262 0042 28B9     		cbnz	r0, .L68
 1263              	.L62:
 350:Application/motor.c ****     {
 351:Application/motor.c ****         if (HAL_CAN_AddTxMessage(_hcan, &TX_MSG, CAN_Send_Data, (uint32_t *)CAN_TX_MAILBOX1) != HAL
 352:Application/motor.c ****         {
 353:Application/motor.c ****             HAL_CAN_AddTxMessage(_hcan, &TX_MSG, CAN_Send_Data, (uint32_t *)CAN_TX_MAILBOX2);
 354:Application/motor.c ****         }
 355:Application/motor.c ****     }
 356:Application/motor.c ****     return 0;
 357:Application/motor.c **** }
 1264              		.loc 1 357 1 view .LVU424
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 30


 1265 0044 70BD     		pop	{r4, r5, r6, pc}
 1266              	.LVL67:
 1267              	.L67:
 344:Application/motor.c ****     else
 1268              		.loc 1 344 9 is_stmt 1 view .LVU425
 1269 0046 0E49     		ldr	r1, .L69+16
 1270              	.LVL68:
 344:Application/motor.c ****     else
 1271              		.loc 1 344 9 is_stmt 0 view .LVU426
 1272 0048 0B48     		ldr	r0, .L69+8
 1273              	.LVL69:
 344:Application/motor.c ****     else
 1274              		.loc 1 344 9 view .LVU427
 1275 004a FFF7FEFF 		bl	memcpy
 1276              	.LVL70:
 1277 004e F2E7     		b	.L60
 1278              	.L68:
 351:Application/motor.c ****         {
 1279              		.loc 1 351 9 is_stmt 1 view .LVU428
 351:Application/motor.c ****         {
 1280              		.loc 1 351 13 is_stmt 0 view .LVU429
 1281 0050 0223     		movs	r3, #2
 1282 0052 094A     		ldr	r2, .L69+8
 1283 0054 0649     		ldr	r1, .L69
 1284 0056 3046     		mov	r0, r6
 1285 0058 FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 1286              	.LVL71:
 351:Application/motor.c ****         {
 1287              		.loc 1 351 12 view .LVU430
 1288 005c 0028     		cmp	r0, #0
 1289 005e F1D0     		beq	.L62
 353:Application/motor.c ****         }
 1290              		.loc 1 353 13 is_stmt 1 view .LVU431
 1291 0060 0423     		movs	r3, #4
 1292 0062 054A     		ldr	r2, .L69+8
 1293 0064 0249     		ldr	r1, .L69
 1294 0066 3046     		mov	r0, r6
 1295 0068 FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 1296              	.LVL72:
 356:Application/motor.c **** }
 1297              		.loc 1 356 12 is_stmt 0 view .LVU432
 1298 006c 0020     		movs	r0, #0
 1299 006e E9E7     		b	.L62
 1300              	.L70:
 1301              		.align	2
 1302              	.L69:
 1303 0070 00000000 		.word	.LANCHOR8
 1304 0074 00000000 		.word	.LANCHOR10
 1305 0078 00000000 		.word	.LANCHOR9
 1306 007c 00000000 		.word	.LANCHOR11
 1307 0080 00000000 		.word	.LANCHOR12
 1308              		.cfi_endproc
 1309              	.LFE183:
 1311              		.section	.text.uint_to_float,"ax",%progbits
 1312              		.align	1
 1313              		.global	uint_to_float
 1314              		.syntax unified
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 31


 1315              		.thumb
 1316              		.thumb_func
 1318              	uint_to_float:
 1319              	.LVL73:
 1320              	.LFB184:
 358:Application/motor.c **** 
 359:Application/motor.c **** /**
 360:Application/motor.c ****  * @brief  ï¿½ï¿½ï¿½Ã¸ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÝµÈ±ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 361:Application/motor.c ****  * @param  x_int     	Òª×ªï¿½ï¿½ï¿½ï¿½ï¿½Þ·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 362:Application/motor.c ****  * @param  x_min      Ä¿ï¿½ê¸¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡Öµ
 363:Application/motor.c ****  * @param  x_max    	Ä¿ï¿½ê¸¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
 364:Application/motor.c ****  * @param  bits      	ï¿½Þ·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
 365:Application/motor.c ****  */
 366:Application/motor.c **** float uint_to_float(int x_int, float x_min, float x_max, int bits)
 367:Application/motor.c **** {
 1321              		.loc 1 367 1 is_stmt 1 view -0
 1322              		.cfi_startproc
 1323              		@ args = 0, pretend = 0, frame = 0
 1324              		@ frame_needed = 0, uses_anonymous_args = 0
 1325              		@ link register save eliminated.
 1326              		.loc 1 367 1 is_stmt 0 view .LVU434
 1327 0000 07EE900A 		vmov	s15, r0	@ int
 368:Application/motor.c ****     /// converts unsigned int to float, given range and number of bits ///
 369:Application/motor.c ****     float span = x_max - x_min;
 1328              		.loc 1 369 5 is_stmt 1 view .LVU435
 1329              		.loc 1 369 11 is_stmt 0 view .LVU436
 1330 0004 70EEC00A 		vsub.f32	s1, s1, s0
 1331              	.LVL74:
 370:Application/motor.c ****     float offset = x_min;
 1332              		.loc 1 370 5 is_stmt 1 view .LVU437
 371:Application/motor.c ****     return ((float)x_int) * span / ((float)((1 << bits) - 1)) + offset;
 1333              		.loc 1 371 5 view .LVU438
 1334              		.loc 1 371 13 is_stmt 0 view .LVU439
 1335 0008 F8EEE77A 		vcvt.f32.s32	s15, s15
 1336              		.loc 1 371 27 view .LVU440
 1337 000c 67EEA00A 		vmul.f32	s1, s15, s1
 1338              	.LVL75:
 1339              		.loc 1 371 48 view .LVU441
 1340 0010 0123     		movs	r3, #1
 1341 0012 8B40     		lsls	r3, r3, r1
 1342              		.loc 1 371 57 view .LVU442
 1343 0014 013B     		subs	r3, r3, #1
 1344              		.loc 1 371 37 view .LVU443
 1345 0016 07EE903A 		vmov	s15, r3	@ int
 1346 001a F8EEE77A 		vcvt.f32.s32	s15, s15
 1347              		.loc 1 371 34 view .LVU444
 1348 001e 80EEA77A 		vdiv.f32	s14, s1, s15
 372:Application/motor.c **** }
 1349              		.loc 1 372 1 view .LVU445
 1350 0022 37EE000A 		vadd.f32	s0, s14, s0
 1351              	.LVL76:
 1352              		.loc 1 372 1 view .LVU446
 1353 0026 7047     		bx	lr
 1354              		.cfi_endproc
 1355              	.LFE184:
 1357              		.section	.text.float_to_uint,"ax",%progbits
 1358              		.align	1
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 32


 1359              		.global	float_to_uint
 1360              		.syntax unified
 1361              		.thumb
 1362              		.thumb_func
 1364              	float_to_uint:
 1365              	.LVL77:
 1366              	.LFB185:
 373:Application/motor.c **** 
 374:Application/motor.c **** /**
 375:Application/motor.c ****  * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½Îªï¿½Þ·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 376:Application/motor.c ****  * @param  x     			Òª×ªï¿½ï¿½ï¿½Ä¸ï¿½ï¿½ï¿½ï¿½ï¿½
 377:Application/motor.c ****  * @param  x_min      ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡Öµ
 378:Application/motor.c ****  * @param  x_max    	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
 379:Application/motor.c ****  * @param  bits      	ï¿½Þ·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
 380:Application/motor.c ****  */
 381:Application/motor.c **** 
 382:Application/motor.c **** int float_to_uint(float x, float x_min, float x_max, int bits)
 383:Application/motor.c **** {
 1367              		.loc 1 383 1 is_stmt 1 view -0
 1368              		.cfi_startproc
 1369              		@ args = 0, pretend = 0, frame = 0
 1370              		@ frame_needed = 0, uses_anonymous_args = 0
 1371              		@ link register save eliminated.
 384:Application/motor.c ****     /// Converts a float to an unsigned int, given range and number of bits///
 385:Application/motor.c ****     float span = x_max - x_min;
 1372              		.loc 1 385 5 view .LVU448
 1373              		.loc 1 385 11 is_stmt 0 view .LVU449
 1374 0000 31EE601A 		vsub.f32	s2, s2, s1
 1375              	.LVL78:
 386:Application/motor.c ****     float offset = x_min;
 1376              		.loc 1 386 5 is_stmt 1 view .LVU450
 387:Application/motor.c ****     return (int)((x - offset) * ((float)((1 << bits) - 1)) / span);
 1377              		.loc 1 387 5 view .LVU451
 1378              		.loc 1 387 21 is_stmt 0 view .LVU452
 1379 0004 30EE600A 		vsub.f32	s0, s0, s1
 1380              	.LVL79:
 1381              		.loc 1 387 45 view .LVU453
 1382 0008 0123     		movs	r3, #1
 1383 000a 8340     		lsls	r3, r3, r0
 1384              		.loc 1 387 54 view .LVU454
 1385 000c 013B     		subs	r3, r3, #1
 1386              		.loc 1 387 34 view .LVU455
 1387 000e 07EE903A 		vmov	s15, r3	@ int
 1388 0012 F8EEE77A 		vcvt.f32.s32	s15, s15
 1389              		.loc 1 387 31 view .LVU456
 1390 0016 60EE277A 		vmul.f32	s15, s0, s15
 1391              		.loc 1 387 60 view .LVU457
 1392 001a 87EE817A 		vdiv.f32	s14, s15, s2
 388:Application/motor.c **** }
 1393              		.loc 1 388 1 view .LVU458
 1394 001e FDEEC77A 		vcvt.s32.f32	s15, s14
 1395 0022 17EE900A 		vmov	r0, s15	@ int
 1396              	.LVL80:
 1397              		.loc 1 388 1 view .LVU459
 1398 0026 7047     		bx	lr
 1399              		.cfi_endproc
 1400              	.LFE185:
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 33


 1402              		.section	.text.Send_DM_MIT_Command,"ax",%progbits
 1403              		.align	1
 1404              		.global	Send_DM_MIT_Command
 1405              		.syntax unified
 1406              		.thumb
 1407              		.thumb_func
 1409              	Send_DM_MIT_Command:
 1410              	.LVL81:
 1411              	.LFB186:
 389:Application/motor.c **** 
 390:Application/motor.c **** /**
 391:Application/motor.c ****  * @brief  MITÄ£Ê½ï¿½ï¿½ï¿½Â¿ï¿½ï¿½ï¿½Ö¡
 392:Application/motor.c ****  * @param  hcan   CANï¿½Ä¾ï¿½ï¿½
 393:Application/motor.c ****  * @param  ID     ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ID
 394:Application/motor.c ****  * @param  _pos   Î»ï¿½Ã¸ï¿½ï¿½ï¿½
 395:Application/motor.c ****  * @param  _vel   ï¿½Ù¶È¸ï¿½ï¿½ï¿½
 396:Application/motor.c ****  * @param  _KP    Î»ï¿½Ã±ï¿½ï¿½ï¿½Ïµï¿½ï¿½
 397:Application/motor.c ****  * @param  _KD    Î»ï¿½ï¿½Î¢ï¿½ï¿½Ïµï¿½ï¿½
 398:Application/motor.c ****  * @param  _torq  ×ªï¿½Ø¸ï¿½ï¿½ï¿½Öµ
 399:Application/motor.c ****  */
 400:Application/motor.c **** HAL_StatusTypeDef Send_DM_MIT_Command(CAN_HandleTypeDef *_hcan, uint16_t id, float _pos, float _vel
 401:Application/motor.c ****                                       float _KP, float _KD, float _torq)
 402:Application/motor.c **** {
 1412              		.loc 1 402 1 is_stmt 1 view -0
 1413              		.cfi_startproc
 1414              		@ args = 0, pretend = 0, frame = 8
 1415              		@ frame_needed = 0, uses_anonymous_args = 0
 1416              		.loc 1 402 1 is_stmt 0 view .LVU461
 1417 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1418              	.LCFI21:
 1419              		.cfi_def_cfa_offset 36
 1420              		.cfi_offset 4, -36
 1421              		.cfi_offset 5, -32
 1422              		.cfi_offset 6, -28
 1423              		.cfi_offset 7, -24
 1424              		.cfi_offset 8, -20
 1425              		.cfi_offset 9, -16
 1426              		.cfi_offset 10, -12
 1427              		.cfi_offset 11, -8
 1428              		.cfi_offset 14, -4
 1429 0004 2DED048B 		vpush.64	{d8, d9}
 1430              	.LCFI22:
 1431              		.cfi_def_cfa_offset 52
 1432              		.cfi_offset 80, -52
 1433              		.cfi_offset 81, -48
 1434              		.cfi_offset 82, -44
 1435              		.cfi_offset 83, -40
 1436 0008 83B0     		sub	sp, sp, #12
 1437              	.LCFI23:
 1438              		.cfi_def_cfa_offset 64
 1439 000a 8146     		mov	r9, r0
 1440 000c 8B46     		mov	fp, r1
 1441 000e F0EE609A 		vmov.f32	s19, s1
 1442 0012 B0EE419A 		vmov.f32	s18, s2
 1443 0016 F0EE618A 		vmov.f32	s17, s3
 1444 001a B0EE428A 		vmov.f32	s16, s4
 403:Application/motor.c ****     static CAN_TxHeaderTypeDef TX_MSG;
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 34


 1445              		.loc 1 403 5 is_stmt 1 view .LVU462
 404:Application/motor.c ****     uint16_t pos_tmp, vel_tmp, kp_tmp, kd_tmp, tor_tmp;
 1446              		.loc 1 404 5 view .LVU463
 405:Application/motor.c ****     static uint8_t CAN_Send_Data[8];
 1447              		.loc 1 405 5 view .LVU464
 406:Application/motor.c ****     uint32_t send_mail_box;
 1448              		.loc 1 406 5 view .LVU465
 407:Application/motor.c **** 
 408:Application/motor.c ****     pos_tmp = float_to_uint(_pos, P_MIN, P_MAX, 16);
 1449              		.loc 1 408 5 view .LVU466
 1450              		.loc 1 408 15 is_stmt 0 view .LVU467
 1451 001e 1020     		movs	r0, #16
 1452              	.LVL82:
 1453              		.loc 1 408 15 view .LVU468
 1454 0020 B2EE091A 		vmov.f32	s2, #1.25e+1
 1455              	.LVL83:
 1456              		.loc 1 408 15 view .LVU469
 1457 0024 FAEE090A 		vmov.f32	s1, #-1.25e+1
 1458              	.LVL84:
 1459              		.loc 1 408 15 view .LVU470
 1460 0028 FFF7FEFF 		bl	float_to_uint
 1461              	.LVL85:
 1462              		.loc 1 408 15 view .LVU471
 1463 002c 8046     		mov	r8, r0
 1464              		.loc 1 408 13 view .LVU472
 1465 002e 1FFA80FA 		uxth	r10, r0
 1466              	.LVL86:
 409:Application/motor.c ****     vel_tmp = float_to_uint(_vel, V_MIN, V_MAX, 12);
 1467              		.loc 1 409 5 is_stmt 1 view .LVU473
 1468              		.loc 1 409 15 is_stmt 0 view .LVU474
 1469 0032 0C20     		movs	r0, #12
 1470 0034 9FED271A 		vldr.32	s2, .L75
 1471 0038 DFED270A 		vldr.32	s1, .L75+4
 1472 003c B0EE690A 		vmov.f32	s0, s19
 1473 0040 FFF7FEFF 		bl	float_to_uint
 1474              	.LVL87:
 1475              		.loc 1 409 13 view .LVU475
 1476 0044 87B2     		uxth	r7, r0
 1477              	.LVL88:
 410:Application/motor.c ****     kp_tmp = float_to_uint(_KP, KP_MIN, KP_MAX, 12);
 1478              		.loc 1 410 5 is_stmt 1 view .LVU476
 1479              		.loc 1 410 14 is_stmt 0 view .LVU477
 1480 0046 DFED259A 		vldr.32	s19, .L75+8
 1481              	.LVL89:
 1482              		.loc 1 410 14 view .LVU478
 1483 004a 0C20     		movs	r0, #12
 1484 004c 9FED241A 		vldr.32	s2, .L75+12
 1485 0050 F0EE690A 		vmov.f32	s1, s19
 1486 0054 B0EE490A 		vmov.f32	s0, s18
 1487 0058 FFF7FEFF 		bl	float_to_uint
 1488              	.LVL90:
 1489 005c 0646     		mov	r6, r0
 1490              		.loc 1 410 12 view .LVU479
 1491 005e 84B2     		uxth	r4, r0
 1492              	.LVL91:
 411:Application/motor.c ****     kd_tmp = float_to_uint(_KD, KD_MIN, KD_MAX, 12);
 1493              		.loc 1 411 5 is_stmt 1 view .LVU480
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 35


 1494              		.loc 1 411 14 is_stmt 0 view .LVU481
 1495 0060 0C20     		movs	r0, #12
 1496 0062 B1EE041A 		vmov.f32	s2, #5.0e+0
 1497 0066 F0EE690A 		vmov.f32	s1, s19
 1498 006a B0EE680A 		vmov.f32	s0, s17
 1499 006e FFF7FEFF 		bl	float_to_uint
 1500              	.LVL92:
 1501              		.loc 1 411 12 view .LVU482
 1502 0072 85B2     		uxth	r5, r0
 1503              	.LVL93:
 412:Application/motor.c ****     tor_tmp = float_to_uint(_torq, T_MIN, T_MAX, 12);
 1504              		.loc 1 412 5 is_stmt 1 view .LVU483
 1505              		.loc 1 412 15 is_stmt 0 view .LVU484
 1506 0074 0C20     		movs	r0, #12
 1507 0076 B3EE021A 		vmov.f32	s2, #1.8e+1
 1508 007a FBEE020A 		vmov.f32	s1, #-1.8e+1
 1509 007e B0EE480A 		vmov.f32	s0, s16
 1510 0082 FFF7FEFF 		bl	float_to_uint
 1511              	.LVL94:
 413:Application/motor.c **** 
 414:Application/motor.c ****     TX_MSG.StdId = id;
 1512              		.loc 1 414 5 is_stmt 1 view .LVU485
 1513              		.loc 1 414 18 is_stmt 0 view .LVU486
 1514 0086 1749     		ldr	r1, .L75+16
 1515 0088 C1F800B0 		str	fp, [r1]
 415:Application/motor.c ****     TX_MSG.IDE = CAN_ID_STD;
 1516              		.loc 1 415 5 is_stmt 1 view .LVU487
 1517              		.loc 1 415 16 is_stmt 0 view .LVU488
 1518 008c 0023     		movs	r3, #0
 1519 008e 8B60     		str	r3, [r1, #8]
 416:Application/motor.c ****     TX_MSG.RTR = CAN_RTR_DATA;
 1520              		.loc 1 416 5 is_stmt 1 view .LVU489
 1521              		.loc 1 416 16 is_stmt 0 view .LVU490
 1522 0090 CB60     		str	r3, [r1, #12]
 417:Application/motor.c ****     TX_MSG.DLC = 0x08;
 1523              		.loc 1 417 5 is_stmt 1 view .LVU491
 1524              		.loc 1 417 16 is_stmt 0 view .LVU492
 1525 0092 0823     		movs	r3, #8
 1526 0094 0B61     		str	r3, [r1, #16]
 418:Application/motor.c **** 
 419:Application/motor.c ****     CAN_Send_Data[0] = (pos_tmp >> 8);
 1527              		.loc 1 419 5 is_stmt 1 view .LVU493
 1528              		.loc 1 419 22 is_stmt 0 view .LVU494
 1529 0096 144A     		ldr	r2, .L75+20
 1530 0098 2AFA03FA 		lsr	r10, r10, r3
 1531              	.LVL95:
 1532              		.loc 1 419 22 view .LVU495
 1533 009c 82F800A0 		strb	r10, [r2]
 420:Application/motor.c ****     CAN_Send_Data[1] = pos_tmp;
 1534              		.loc 1 420 5 is_stmt 1 view .LVU496
 1535              		.loc 1 420 22 is_stmt 0 view .LVU497
 1536 00a0 82F80180 		strb	r8, [r2, #1]
 421:Application/motor.c ****     CAN_Send_Data[2] = (vel_tmp >> 4);
 1537              		.loc 1 421 5 is_stmt 1 view .LVU498
 1538              		.loc 1 421 22 is_stmt 0 view .LVU499
 1539 00a4 3B09     		lsrs	r3, r7, #4
 1540 00a6 9370     		strb	r3, [r2, #2]
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 36


 422:Application/motor.c ****     CAN_Send_Data[3] = ((vel_tmp & 0xF) << 4) | (kp_tmp >> 8);
 1541              		.loc 1 422 5 is_stmt 1 view .LVU500
 1542              		.loc 1 422 47 is_stmt 0 view .LVU501
 1543 00a8 240A     		lsrs	r4, r4, #8
 1544              	.LVL96:
 1545              		.loc 1 422 47 view .LVU502
 1546 00aa 44EA0717 		orr	r7, r4, r7, lsl #4
 1547              	.LVL97:
 1548              		.loc 1 422 22 view .LVU503
 1549 00ae D770     		strb	r7, [r2, #3]
 423:Application/motor.c ****     CAN_Send_Data[4] = kp_tmp;
 1550              		.loc 1 423 5 is_stmt 1 view .LVU504
 1551              		.loc 1 423 22 is_stmt 0 view .LVU505
 1552 00b0 1671     		strb	r6, [r2, #4]
 424:Application/motor.c ****     CAN_Send_Data[5] = (kd_tmp >> 4);
 1553              		.loc 1 424 5 is_stmt 1 view .LVU506
 1554              		.loc 1 424 22 is_stmt 0 view .LVU507
 1555 00b2 2B09     		lsrs	r3, r5, #4
 1556 00b4 5371     		strb	r3, [r2, #5]
 425:Application/motor.c ****     CAN_Send_Data[6] = ((kd_tmp & 0xF) << 4) | (tor_tmp >> 8);
 1557              		.loc 1 425 5 is_stmt 1 view .LVU508
 1558              		.loc 1 425 46 is_stmt 0 view .LVU509
 1559 00b6 C0F30723 		ubfx	r3, r0, #8, #8
 1560 00ba 43EA0515 		orr	r5, r3, r5, lsl #4
 1561              	.LVL98:
 1562              		.loc 1 425 22 view .LVU510
 1563 00be 9571     		strb	r5, [r2, #6]
 426:Application/motor.c ****     CAN_Send_Data[7] = tor_tmp;
 1564              		.loc 1 426 5 is_stmt 1 view .LVU511
 1565              		.loc 1 426 22 is_stmt 0 view .LVU512
 1566 00c0 D071     		strb	r0, [r2, #7]
 427:Application/motor.c **** 
 428:Application/motor.c ****     // uint32_t count = 0;
 429:Application/motor.c ****     // while (!((_hcan->State == HAL_CAN_STATE_READY) || (_hcan->State == HAL_CAN_STATE_LISTENING))
 430:Application/motor.c ****     // {
 431:Application/motor.c ****     //     count++;
 432:Application/motor.c ****     //     if (count > 10000)
 433:Application/motor.c ****     //         break;
 434:Application/motor.c ****     // }
 435:Application/motor.c ****     // count = 0;
 436:Application/motor.c ****     // while (HAL_CAN_GetTxMailboxesFreeLevel(_hcan) == 0)
 437:Application/motor.c ****     // {
 438:Application/motor.c ****     //     count++;
 439:Application/motor.c ****     //     if (count > 10000)
 440:Application/motor.c ****     //         break;
 441:Application/motor.c ****     // }
 442:Application/motor.c ****     // /* Check Tx Mailbox 1 status */
 443:Application/motor.c ****     // if ((_hcan->Instance->TSR & CAN_TSR_TME0) != 0U)
 444:Application/motor.c ****     // {
 445:Application/motor.c ****     //     send_mail_box = CAN_TX_MAILBOX0;
 446:Application/motor.c ****     // }
 447:Application/motor.c ****     // /* Check Tx Mailbox 1 status */
 448:Application/motor.c ****     // else if ((_hcan->Instance->TSR & CAN_TSR_TME1) != 0U)
 449:Application/motor.c ****     // {
 450:Application/motor.c ****     //     send_mail_box = CAN_TX_MAILBOX1;
 451:Application/motor.c ****     // }
 452:Application/motor.c **** 
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 37


 453:Application/motor.c ****     // /* Check Tx Mailbox 2 status */
 454:Application/motor.c ****     // else if ((_hcan->Instance->TSR & CAN_TSR_TME2) != 0U)
 455:Application/motor.c ****     // {
 456:Application/motor.c ****     //     send_mail_box = CAN_TX_MAILBOX2;
 457:Application/motor.c ****     // }
 458:Application/motor.c ****     return HAL_CAN_AddTxMessage(_hcan, &TX_MSG, CAN_Send_Data, &send_mail_box);
 1567              		.loc 1 458 5 is_stmt 1 view .LVU513
 1568              		.loc 1 458 12 is_stmt 0 view .LVU514
 1569 00c2 01AB     		add	r3, sp, #4
 1570 00c4 4846     		mov	r0, r9
 1571              	.LVL99:
 1572              		.loc 1 458 12 view .LVU515
 1573 00c6 FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 1574              	.LVL100:
 459:Application/motor.c **** }
 1575              		.loc 1 459 1 view .LVU516
 1576 00ca 03B0     		add	sp, sp, #12
 1577              	.LCFI24:
 1578              		.cfi_def_cfa_offset 52
 1579              		@ sp needed
 1580 00cc BDEC048B 		vldm	sp!, {d8-d9}
 1581              	.LCFI25:
 1582              		.cfi_restore 82
 1583              		.cfi_restore 83
 1584              		.cfi_restore 80
 1585              		.cfi_restore 81
 1586              		.cfi_def_cfa_offset 36
 1587              	.LVL101:
 1588              		.loc 1 459 1 view .LVU517
 1589 00d0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1590              	.LVL102:
 1591              	.L76:
 1592              		.loc 1 459 1 view .LVU518
 1593              		.align	2
 1594              	.L75:
 1595 00d4 00003442 		.word	1110704128
 1596 00d8 000034C2 		.word	-1036779520
 1597 00dc 00000000 		.word	0
 1598 00e0 0000FA43 		.word	1140457472
 1599 00e4 00000000 		.word	.LANCHOR13
 1600 00e8 00000000 		.word	.LANCHOR14
 1601              		.cfi_endproc
 1602              	.LFE186:
 1604              		.section	.text.Get_DM_Info,"ax",%progbits
 1605              		.align	1
 1606              		.global	Get_DM_Info
 1607              		.syntax unified
 1608              		.thumb
 1609              		.thumb_func
 1611              	Get_DM_Info:
 1612              	.LVL103:
 1613              	.LFB187:
 460:Application/motor.c **** 
 461:Application/motor.c **** void Get_DM_Info(motor_info *ptr, uint8_t *aData)
 462:Application/motor.c **** {
 1614              		.loc 1 462 1 is_stmt 1 view -0
 1615              		.cfi_startproc
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 38


 1616              		@ args = 0, pretend = 0, frame = 0
 1617              		@ frame_needed = 0, uses_anonymous_args = 0
 1618              		.loc 1 462 1 is_stmt 0 view .LVU520
 1619 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1620              	.LCFI26:
 1621              		.cfi_def_cfa_offset 24
 1622              		.cfi_offset 3, -24
 1623              		.cfi_offset 4, -20
 1624              		.cfi_offset 5, -16
 1625              		.cfi_offset 6, -12
 1626              		.cfi_offset 7, -8
 1627              		.cfi_offset 14, -4
 1628 0002 0446     		mov	r4, r0
 1629 0004 0D46     		mov	r5, r1
 463:Application/motor.c ****     ptr->CAN_ID = aData[0] & 0xF;
 1630              		.loc 1 463 5 is_stmt 1 view .LVU521
 1631              		.loc 1 463 24 is_stmt 0 view .LVU522
 1632 0006 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 1633              		.loc 1 463 28 view .LVU523
 1634 0008 03F00F03 		and	r3, r3, #15
 1635              		.loc 1 463 17 view .LVU524
 1636 000c A0F86030 		strh	r3, [r0, #96]	@ movhi
 464:Application/motor.c ****     ptr->Err = aData[0] >> 4;
 1637              		.loc 1 464 5 is_stmt 1 view .LVU525
 1638              		.loc 1 464 21 is_stmt 0 view .LVU526
 1639 0010 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 1640              		.loc 1 464 14 view .LVU527
 1641 0012 1B09     		lsrs	r3, r3, #4
 1642 0014 80F86230 		strb	r3, [r0, #98]
 465:Application/motor.c ****     ptr->dm_raw_angle = (aData[1] << 8) | aData[2];
 1643              		.loc 1 465 5 is_stmt 1 view .LVU528
 1644              		.loc 1 465 31 is_stmt 0 view .LVU529
 1645 0018 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 1646              		.loc 1 465 48 view .LVU530
 1647 001a 8878     		ldrb	r0, [r1, #2]	@ zero_extendqisi2
 1648              	.LVL104:
 1649              		.loc 1 465 41 view .LVU531
 1650 001c 40EA0320 		orr	r0, r0, r3, lsl #8
 1651              		.loc 1 465 23 view .LVU532
 1652 0020 2063     		str	r0, [r4, #48]
 466:Application/motor.c ****     ptr->raw_velocity = (aData[3] << 4) | (aData[4] >> 4);
 1653              		.loc 1 466 5 is_stmt 1 view .LVU533
 1654              		.loc 1 466 31 is_stmt 0 view .LVU534
 1655 0022 CB78     		ldrb	r3, [r1, #3]	@ zero_extendqisi2
 1656              		.loc 1 466 49 view .LVU535
 1657 0024 0F79     		ldrb	r7, [r1, #4]	@ zero_extendqisi2
 1658              		.loc 1 466 53 view .LVU536
 1659 0026 3F09     		lsrs	r7, r7, #4
 1660              		.loc 1 466 41 view .LVU537
 1661 0028 47EA0317 		orr	r7, r7, r3, lsl #4
 1662              		.loc 1 466 23 view .LVU538
 1663 002c A760     		str	r7, [r4, #8]
 467:Application/motor.c ****     ptr->raw_torque = ((aData[4] & 0xF) << 8) | aData[5];
 1664              		.loc 1 467 5 is_stmt 1 view .LVU539
 1665              		.loc 1 467 30 is_stmt 0 view .LVU540
 1666 002e 0E79     		ldrb	r6, [r1, #4]	@ zero_extendqisi2
 1667              		.loc 1 467 41 view .LVU541
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 39


 1668 0030 3602     		lsls	r6, r6, #8
 1669 0032 06F47066 		and	r6, r6, #3840
 1670              		.loc 1 467 54 view .LVU542
 1671 0036 4B79     		ldrb	r3, [r1, #5]	@ zero_extendqisi2
 1672              		.loc 1 467 47 view .LVU543
 1673 0038 1E43     		orrs	r6, r6, r3
 1674              		.loc 1 467 21 view .LVU544
 1675 003a E661     		str	r6, [r4, #28]
 468:Application/motor.c **** 
 469:Application/motor.c ****     ptr->angle_in_degree = uint_to_float(ptr->dm_raw_angle, P_MIN, P_MAX, 16) * RADIAN_COEF; // (-1
 1676              		.loc 1 469 5 is_stmt 1 view .LVU545
 1677              		.loc 1 469 28 is_stmt 0 view .LVU546
 1678 003c 1021     		movs	r1, #16
 1679              	.LVL105:
 1680              		.loc 1 469 28 view .LVU547
 1681 003e F2EE090A 		vmov.f32	s1, #1.25e+1
 1682 0042 BAEE090A 		vmov.f32	s0, #-1.25e+1
 1683 0046 FFF7FEFF 		bl	uint_to_float
 1684              	.LVL106:
 1685              		.loc 1 469 79 view .LVU548
 1686 004a DFED0E7A 		vldr.32	s15, .L79
 1687 004e 20EE270A 		vmul.f32	s0, s0, s15
 1688              		.loc 1 469 26 view .LVU549
 1689 0052 84ED0A0A 		vstr.32	s0, [r4, #40]
 470:Application/motor.c ****     ptr->velocity_in_radps = uint_to_float(ptr->raw_velocity, V_MIN, V_MAX, 12);             // (-4
 1690              		.loc 1 470 5 is_stmt 1 view .LVU550
 1691              		.loc 1 470 30 is_stmt 0 view .LVU551
 1692 0056 0C21     		movs	r1, #12
 1693 0058 DFED0B0A 		vldr.32	s1, .L79+4
 1694 005c 9FED0B0A 		vldr.32	s0, .L79+8
 1695 0060 3846     		mov	r0, r7
 1696 0062 FFF7FEFF 		bl	uint_to_float
 1697              	.LVL107:
 1698              		.loc 1 470 28 view .LVU552
 1699 0066 84ED010A 		vstr.32	s0, [r4, #4]
 471:Application/motor.c ****     ptr->torque_in_Nm = uint_to_float(ptr->raw_torque, T_MIN, T_MAX, 12);                    // (-1
 1700              		.loc 1 471 5 is_stmt 1 view .LVU553
 1701              		.loc 1 471 25 is_stmt 0 view .LVU554
 1702 006a 0C21     		movs	r1, #12
 1703 006c F3EE020A 		vmov.f32	s1, #1.8e+1
 1704 0070 BBEE020A 		vmov.f32	s0, #-1.8e+1
 1705 0074 3046     		mov	r0, r6
 1706 0076 FFF7FEFF 		bl	uint_to_float
 1707              	.LVL108:
 1708              		.loc 1 471 23 view .LVU555
 1709 007a 84ED080A 		vstr.32	s0, [r4, #32]
 472:Application/motor.c **** 
 473:Application/motor.c ****     ptr->Temperature = aData[7];
 1710              		.loc 1 473 5 is_stmt 1 view .LVU556
 1711              		.loc 1 473 22 is_stmt 0 view .LVU557
 1712 007e EB79     		ldrb	r3, [r5, #7]	@ zero_extendqisi2
 1713 0080 2375     		strb	r3, [r4, #20]
 474:Application/motor.c **** }
 1714              		.loc 1 474 1 view .LVU558
 1715 0082 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1716              	.LVL109:
 1717              	.L80:
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 40


 1718              		.loc 1 474 1 view .LVU559
 1719              		.align	2
 1720              	.L79:
 1721 0084 E12E6542 		.word	1113927393
 1722 0088 00003442 		.word	1110704128
 1723 008c 000034C2 		.word	-1036779520
 1724              		.cfi_endproc
 1725              	.LFE187:
 1727              		.section	.text.Get_DM_Offset,"ax",%progbits
 1728              		.align	1
 1729              		.global	Get_DM_Offset
 1730              		.syntax unified
 1731              		.thumb
 1732              		.thumb_func
 1734              	Get_DM_Offset:
 1735              	.LVL110:
 1736              	.LFB188:
 475:Application/motor.c **** 
 476:Application/motor.c **** void Get_DM_Offset(motor_info *ptr, uint8_t *aData)
 477:Application/motor.c **** {
 1737              		.loc 1 477 1 is_stmt 1 view -0
 1738              		.cfi_startproc
 1739              		@ args = 0, pretend = 0, frame = 0
 1740              		@ frame_needed = 0, uses_anonymous_args = 0
 1741              		@ link register save eliminated.
 478:Application/motor.c ****     ptr->dm_raw_angle = (aData[1] << 8) | aData[2];
 1742              		.loc 1 478 5 view .LVU561
 1743              		.loc 1 478 31 is_stmt 0 view .LVU562
 1744 0000 4A78     		ldrb	r2, [r1, #1]	@ zero_extendqisi2
 1745              		.loc 1 478 48 view .LVU563
 1746 0002 8B78     		ldrb	r3, [r1, #2]	@ zero_extendqisi2
 1747              		.loc 1 478 41 view .LVU564
 1748 0004 43EA0223 		orr	r3, r3, r2, lsl #8
 1749              		.loc 1 478 23 view .LVU565
 1750 0008 0363     		str	r3, [r0, #48]
 479:Application/motor.c ****     ptr->offset_angle = ptr->dm_raw_angle;
 1751              		.loc 1 479 5 is_stmt 1 view .LVU566
 1752              		.loc 1 479 23 is_stmt 0 view .LVU567
 1753 000a 4387     		strh	r3, [r0, #58]	@ movhi
 480:Application/motor.c ****     ptr->last_angle = ptr->dm_raw_angle; // update last_angle
 1754              		.loc 1 480 5 is_stmt 1 view .LVU568
 1755              		.loc 1 480 21 is_stmt 0 view .LVU569
 1756 000c 0387     		strh	r3, [r0, #56]	@ movhi
 481:Application/motor.c **** }
 1757              		.loc 1 481 1 view .LVU570
 1758 000e 7047     		bx	lr
 1759              		.cfi_endproc
 1760              	.LFE188:
 1762              		.global	Data_Save_zero
 1763              		.global	Data_Failure
 1764              		.global	Data_Enable
 1765              		.global	debugNum
 1766              		.section	.bss.CAN_Send_Data.0,"aw",%nobits
 1767              		.align	2
 1768              		.set	.LANCHOR14,. + 0
 1771              	CAN_Send_Data.0:
 1772 0000 00000000 		.space	8
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 41


 1772      00000000 
 1773              		.section	.bss.CAN_Send_Data.10,"aw",%nobits
 1774              		.align	2
 1775              		.set	.LANCHOR1,. + 0
 1778              	CAN_Send_Data.10:
 1779 0000 00000000 		.space	8
 1779      00000000 
 1780              		.section	.bss.CAN_Send_Data.2,"aw",%nobits
 1781              		.align	2
 1782              		.set	.LANCHOR9,. + 0
 1785              	CAN_Send_Data.2:
 1786 0000 00000000 		.space	8
 1786      00000000 
 1787              		.section	.bss.CAN_Send_Data.4,"aw",%nobits
 1788              		.align	2
 1789              		.set	.LANCHOR7,. + 0
 1792              	CAN_Send_Data.4:
 1793 0000 00000000 		.space	8
 1793      00000000 
 1794              		.section	.bss.CAN_Send_Data.6,"aw",%nobits
 1795              		.align	2
 1796              		.set	.LANCHOR5,. + 0
 1799              	CAN_Send_Data.6:
 1800 0000 00000000 		.space	8
 1800      00000000 
 1801              		.section	.bss.CAN_Send_Data.8,"aw",%nobits
 1802              		.align	2
 1803              		.set	.LANCHOR3,. + 0
 1806              	CAN_Send_Data.8:
 1807 0000 00000000 		.space	8
 1807      00000000 
 1808              		.section	.bss.TX_MSG.1,"aw",%nobits
 1809              		.align	2
 1810              		.set	.LANCHOR13,. + 0
 1813              	TX_MSG.1:
 1814 0000 00000000 		.space	24
 1814      00000000 
 1814      00000000 
 1814      00000000 
 1814      00000000 
 1815              		.section	.bss.TX_MSG.11,"aw",%nobits
 1816              		.align	2
 1817              		.set	.LANCHOR0,. + 0
 1820              	TX_MSG.11:
 1821 0000 00000000 		.space	24
 1821      00000000 
 1821      00000000 
 1821      00000000 
 1821      00000000 
 1822              		.section	.bss.TX_MSG.3,"aw",%nobits
 1823              		.align	2
 1824              		.set	.LANCHOR8,. + 0
 1827              	TX_MSG.3:
 1828 0000 00000000 		.space	24
 1828      00000000 
 1828      00000000 
 1828      00000000 
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 42


 1828      00000000 
 1829              		.section	.bss.TX_MSG.5,"aw",%nobits
 1830              		.align	2
 1831              		.set	.LANCHOR6,. + 0
 1834              	TX_MSG.5:
 1835 0000 00000000 		.space	24
 1835      00000000 
 1835      00000000 
 1835      00000000 
 1835      00000000 
 1836              		.section	.bss.TX_MSG.7,"aw",%nobits
 1837              		.align	2
 1838              		.set	.LANCHOR4,. + 0
 1841              	TX_MSG.7:
 1842 0000 00000000 		.space	24
 1842      00000000 
 1842      00000000 
 1842      00000000 
 1842      00000000 
 1843              		.section	.bss.TX_MSG.9,"aw",%nobits
 1844              		.align	2
 1845              		.set	.LANCHOR2,. + 0
 1848              	TX_MSG.9:
 1849 0000 00000000 		.space	24
 1849      00000000 
 1849      00000000 
 1849      00000000 
 1849      00000000 
 1850              		.section	.bss.debugNum,"aw",%nobits
 1851              		.align	2
 1854              	debugNum:
 1855 0000 00000000 		.space	20
 1855      00000000 
 1855      00000000 
 1855      00000000 
 1855      00000000 
 1856              		.section	.data.Data_Enable,"aw"
 1857              		.align	2
 1858              		.set	.LANCHOR10,. + 0
 1861              	Data_Enable:
 1862 0000 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\374"
 1862      FFFFFFFC 
 1863              		.section	.data.Data_Failure,"aw"
 1864              		.align	2
 1865              		.set	.LANCHOR11,. + 0
 1868              	Data_Failure:
 1869 0000 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\375"
 1869      FFFFFFFD 
 1870              		.section	.data.Data_Save_zero,"aw"
 1871              		.align	2
 1872              		.set	.LANCHOR12,. + 0
 1875              	Data_Save_zero:
 1876 0000 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\376"
 1876      FFFFFFFE 
 1877              		.text
 1878              	.Letext0:
 1879              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 43


 1880              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1881              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 1882              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 1883              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1884              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_can.h"
 1885              		.file 8 "Components/user_lib.h"
 1886              		.file 9 "Components/Controller/controller.h"
 1887              		.file 10 "Application/motor.h"
 1888              		.file 11 "<built-in>"
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 44


DEFINED SYMBOLS
                            *ABS*:00000000 motor.c
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:20     .text.Motor_Torque_Calculate:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:26     .text.Motor_Torque_Calculate:00000000 Motor_Torque_Calculate
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:104    .text.Motor_Speed_Calculate:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:110    .text.Motor_Speed_Calculate:00000000 Motor_Speed_Calculate
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:152    .text.Motor_Angle_Calculate:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:158    .text.Motor_Angle_Calculate:00000000 Motor_Angle_Calculate
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:218    .text.Get_Motor_Info:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:224    .text.Get_Motor_Info:00000000 Get_Motor_Info
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:379    .text.Get_Motor_Info:000000c4 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:387    .text.Get_Motor_Offset:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:393    .text.Get_Motor_Offset:00000000 Get_Motor_Offset
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:419    .text.Send_Motor_Current_1_4:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:425    .text.Send_Motor_Current_1_4:00000000 Send_Motor_Current_1_4
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:515    .text.Send_Motor_Current_1_4:00000054 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:521    .text.Send_Motor_Current_5_8:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:527    .text.Send_Motor_Current_5_8:00000000 Send_Motor_Current_5_8
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:617    .text.Send_Motor_Current_5_8:00000054 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:623    .text.Get_LK_Info:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:629    .text.Get_LK_Info:00000000 Get_LK_Info
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:798    .text.Get_LK_Info:000000ec $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:806    .text.Get_LK_Offset:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:812    .text.Get_LK_Offset:00000000 Get_LK_Offset
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:841    .text.Send_LK_Current:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:847    .text.Send_LK_Current:00000000 Send_LK_Current
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1035   .text.Send_LK_Current:000000b4 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1041   .text.Send_LK_Current_Single:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1047   .text.Send_LK_Current_Single:00000000 Send_LK_Current_Single
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1128   .text.Send_LK_Current_Single:00000044 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1134   .text.LK8008_Current_Solver:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1140   .text.LK8008_Current_Solver:00000000 LK8008_Current_Solver
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1162   .text.LK8008_Current_Solver:00000014 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1167   .text.DM_CANx_SendStdData:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1173   .text.DM_CANx_SendStdData:00000000 DM_CANx_SendStdData
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1303   .text.DM_CANx_SendStdData:00000070 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1312   .text.uint_to_float:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1318   .text.uint_to_float:00000000 uint_to_float
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1358   .text.float_to_uint:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1364   .text.float_to_uint:00000000 float_to_uint
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1403   .text.Send_DM_MIT_Command:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1409   .text.Send_DM_MIT_Command:00000000 Send_DM_MIT_Command
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1595   .text.Send_DM_MIT_Command:000000d4 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1605   .text.Get_DM_Info:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1611   .text.Get_DM_Info:00000000 Get_DM_Info
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1721   .text.Get_DM_Info:00000084 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1728   .text.Get_DM_Offset:00000000 $t
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1734   .text.Get_DM_Offset:00000000 Get_DM_Offset
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1875   .data.Data_Save_zero:00000000 Data_Save_zero
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1868   .data.Data_Failure:00000000 Data_Failure
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1861   .data.Data_Enable:00000000 Data_Enable
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1854   .bss.debugNum:00000000 debugNum
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1767   .bss.CAN_Send_Data.0:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1771   .bss.CAN_Send_Data.0:00000000 CAN_Send_Data.0
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1774   .bss.CAN_Send_Data.10:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1778   .bss.CAN_Send_Data.10:00000000 CAN_Send_Data.10
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1781   .bss.CAN_Send_Data.2:00000000 $d
ARM GAS  C:\Users\86152\AppData\Local\Temp\cc0sye4v.s 			page 45


C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1785   .bss.CAN_Send_Data.2:00000000 CAN_Send_Data.2
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1788   .bss.CAN_Send_Data.4:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1792   .bss.CAN_Send_Data.4:00000000 CAN_Send_Data.4
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1795   .bss.CAN_Send_Data.6:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1799   .bss.CAN_Send_Data.6:00000000 CAN_Send_Data.6
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1802   .bss.CAN_Send_Data.8:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1806   .bss.CAN_Send_Data.8:00000000 CAN_Send_Data.8
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1809   .bss.TX_MSG.1:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1813   .bss.TX_MSG.1:00000000 TX_MSG.1
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1816   .bss.TX_MSG.11:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1820   .bss.TX_MSG.11:00000000 TX_MSG.11
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1823   .bss.TX_MSG.3:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1827   .bss.TX_MSG.3:00000000 TX_MSG.3
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1830   .bss.TX_MSG.5:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1834   .bss.TX_MSG.5:00000000 TX_MSG.5
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1837   .bss.TX_MSG.7:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1841   .bss.TX_MSG.7:00000000 TX_MSG.7
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1844   .bss.TX_MSG.9:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1848   .bss.TX_MSG.9:00000000 TX_MSG.9
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1851   .bss.debugNum:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1857   .data.Data_Enable:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1864   .data.Data_Failure:00000000 $d
C:\Users\86152\AppData\Local\Temp\cc0sye4v.s:1871   .data.Data_Save_zero:00000000 $d

UNDEFINED SYMBOLS
PID_Calculate
float_constrain
loop_float_constrain
HAL_CAN_AddTxMessage
HAL_CAN_GetTxMailboxesFreeLevel
memcpy
